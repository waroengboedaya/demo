!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.apitizer=t()}(this,function(){var e,require,t;!function(r){function n(e,t){return b.call(e,t)}function i(e,t){var r,n,i,o,a,s,u,l,c,f,h,p=t&&t.split("/"),d=y.map,m=d&&d["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=e.split("/"),a=e.length-1,y.nodeIdCompat&&E.test(e[a])&&(e[a]=e[a].replace(E,"")),e=p.concat(e),c=0;c<e.length;c+=1)if(h=e[c],"."===h)e.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&d){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),p)for(f=p.length;f>0;f-=1)if(i=d[p.slice(0,f).join("/")],i&&(i=i[n])){o=i,s=c;break}if(o)break;!u&&m&&m[n]&&(u=m[n],l=c)}!o&&u&&(o=u,s=l),o&&(r.splice(0,s,o),e=r.join("/"))}return e}function o(e,t){return function(){return h.apply(r,x.call(arguments,0).concat([e,t]))}}function a(e){return function(t){return i(t,e)}}function s(e){return function(t){m[e]=t}}function u(e){if(n(g,e)){var t=g[e];delete g[e],v[e]=!0,f.apply(r,t)}if(!n(m,e)&&!n(v,e))throw new Error("No "+e);return m[e]}function l(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function c(e){return function(){return y&&y.config&&y.config[e]||{}}}var f,h,p,d,m={},g={},y={},v={},b=Object.prototype.hasOwnProperty,x=[].slice,E=/\.js$/;p=function(e,t){var r,n=l(e),o=n[0];return e=n[1],o&&(o=i(o,t),r=u(o)),o?e=r&&r.normalize?r.normalize(e,a(t)):i(e,t):(e=i(e,t),n=l(e),o=n[0],e=n[1],o&&(r=u(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:r}},d={require:function(e){return o(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:c(e)}}},f=function(e,t,i,a){var l,c,f,h,y,b,x=[],E=typeof i;if(a=a||e,"undefined"===E||"function"===E){for(t=!t.length&&i.length?["require","exports","module"]:t,y=0;y<t.length;y+=1)if(h=p(t[y],a),c=h.f,"require"===c)x[y]=d.require(e);else if("exports"===c)x[y]=d.exports(e),b=!0;else if("module"===c)l=x[y]=d.module(e);else if(n(m,c)||n(g,c)||n(v,c))x[y]=u(c);else{if(!h.p)throw new Error(e+" missing "+c);h.p.load(h.n,o(a,!0),s(c),{}),x[y]=m[c]}f=i?i.apply(m[e],x):void 0,e&&(l&&l.exports!==r&&l.exports!==m[e]?m[e]=l.exports:f===r&&b||(m[e]=f))}else e&&(m[e]=i)},e=require=h=function(e,t,n,i,o){if("string"==typeof e)return d[e]?d[e](t):u(p(e,t).f);if(!e.splice){if(y=e,y.deps&&h(y.deps,y.callback),!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},"function"==typeof n&&(n=i,i=o),i?f(r,e,t,n):setTimeout(function(){f(r,e,t,n)},4),h},h.config=function(e){return h(e)},e._defined=m,t=function(e,t,r){t.splice||(r=t,t=[]),n(m,e)||n(g,e)||(g[e]=[e,t,r])},t.amd={jQuery:!0}}(),t("bower_components/almond/almond.js",function(){}),function(e,r){"function"==typeof t&&t.amd?t("tv4",[],r):"undefined"!=typeof module&&module.exports?module.exports=r():e.tv4=r()}(this,function(){function e(t,r){if(t===r)return!0;if("object"==typeof t&&"object"==typeof r){if(Array.isArray(t)!==Array.isArray(r))return!1;if(Array.isArray(t)){if(t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(!e(t[n],r[n]))return!1}else{var i;for(i in t)if(void 0===r[i]&&void 0!==t[i])return!1;for(i in r)if(void 0===t[i]&&void 0!==r[i])return!1;for(i in t)if(!e(t[i],r[i]))return!1}return!0}return!1}function t(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function r(e,r){function n(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return r=t(r||""),e=t(e||""),r&&e?(r.protocol||e.protocol)+(r.protocol||r.authority?r.authority:e.authority)+n(r.protocol||r.authority||"/"===r.pathname.charAt(0)?r.pathname:r.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+r.pathname:e.pathname)+(r.protocol||r.authority||r.pathname?r.search:r.search||e.search)+r.hash:null}function n(e){return e.split("#")[0]}function i(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=r(t,e.id),e.id=t),Array.isArray(e))for(var n=0;n<e.length;n++)i(e[n],t);else{"string"==typeof e.$ref&&(e.$ref=r(t,e.$ref));for(var o in e)"enum"!==o&&i(e[o],t)}}function o(e,t,r,n,i){if(Error.call(this),void 0===e)throw new Error("No code supplied for error: "+t);this.message=t,this.code=e,this.dataPath=r||"",this.schemaPath=n||"",this.subErrors=i||null;var o=new Error(this.message);if(this.stack=o.stack||o.stacktrace,!this.stack)try{throw o}catch(o){this.stack=o.stack||o.stacktrace}}function a(e,t){if(t.substring(0,e.length)===e){var r=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===r.charAt(0)||"?"===r.charAt(0))return!0}return!1}function s(e){var t=new u,o=e||"en",a={addFormat:function(){t.addFormat.apply(t,arguments)},language:function(e){return e?(p[e]||(e=e.split("-")[0]),p[e]?(o=e,e):!1):o},addLanguage:function(e,t){var r;for(r in l)t[r]&&!t[l[r]]&&(t[l[r]]=t[r]);var n=e.split("-")[0];if(p[n]){p[e]=Object.create(p[n]);for(r in t)"undefined"==typeof p[n][r]&&(p[n][r]=t[r]),p[e][r]=t[r]}else p[e]=t,p[n]=t;return this},freshApi:function(e){var t=s();return e&&t.language(e),t},validate:function(e,r,n,i){var a=new u(t,!1,p[o],n,i);"string"==typeof r&&(r={$ref:r}),a.addSchema("",r);var s=a.validateAll(e,r,null,null,"");return!s&&i&&(s=a.banUnknownProperties()),this.error=s,this.missing=a.missing,this.valid=null===s,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,r,n,i){var a=new u(t,!0,p[o],n,i);"string"==typeof r&&(r={$ref:r}),a.addSchema("",r),a.validateAll(e,r,null,null,""),i&&a.banUnknownProperties();var s={};return s.errors=a.errors,s.missing=a.missing,s.valid=0===s.errors.length,s},addSchema:function(){return t.addSchema.apply(t,arguments)},getSchema:function(){return t.getSchema.apply(t,arguments)},getSchemaMap:function(){return t.getSchemaMap.apply(t,arguments)},getSchemaUris:function(){return t.getSchemaUris.apply(t,arguments)},getMissingUris:function(){return t.getMissingUris.apply(t,arguments)},dropSchemas:function(){t.dropSchemas.apply(t,arguments)},defineKeyword:function(){t.defineKeyword.apply(t,arguments)},defineError:function(e,t,r){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!==0||1e4>t)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof l[e])throw new Error("Error already defined: "+e+" as "+l[e]);if("undefined"!=typeof c[t])throw new Error("Error code already used: "+c[t]+" as "+t);l[e]=t,c[t]=e,h[e]=h[t]=r;for(var n in p){var i=p[n];i[e]&&(i[t]=i[t]||i[e])}},reset:function(){t.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:i,resolveUrl:r,getDocumentUri:n,errorCodes:l};return a}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var o=[];for(var a in i)e.call(i,a)&&o.push(a);if(t)for(var s=0;n>s;s++)e.call(i,r[s])&&o.push(r[s]);return o}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&1/0!==n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var i=n>=0?n:Math.max(r-Math.abs(n),0);r>i;i++)if(i in t&&t[i]===e)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(r){return!0}});var u=function(e,t,r,n,i){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),i&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=r,this.definedKeywords={},e)for(var o in e.definedKeywords)this.definedKeywords[o]=e.definedKeywords[o].slice(0)};u.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},u.prototype.createError=function(e,t,r,n,i){var a=this.errorMessages[e]||h[e];if("string"!=typeof a)return new o(e,"Unknown error code "+e+": "+JSON.stringify(t),r,n,i);var s=a.replace(/\{([^{}]*)\}/g,function(e,r){var n=t[r];return"string"==typeof n||"number"==typeof n?n:e});return new o(e,s,r,n,i)},u.prototype.returnError=function(e){return e},u.prototype.collectError=function(e){return e&&this.errors.push(e),null},u.prototype.prefixErrors=function(e,t,r){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(t,r);return this},u.prototype.banUnknownProperties=function(){for(var e in this.unknownPropertyPaths){var t=this.createError(l.UNKNOWN_PROPERTY,{path:e},e,""),r=this.handleError(t);if(r)return r}return null},u.prototype.addFormat=function(e,t){if("object"==typeof e){for(var r in e)this.addFormat(r,e[r]);return this}this.formatValidators[e]=t},u.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(l.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","");t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},u.prototype.getSchema=function(e,t){var r;if(void 0!==this.schemas[e])return r=this.schemas[e],this.resolveRefs(r,t);var n=e,i="";if(-1!==e.indexOf("#")&&(i=e.substring(e.indexOf("#")+1),n=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[n]){r=this.schemas[n];var o=decodeURIComponent(i);if(""===o)return this.resolveRefs(r,t);if("/"!==o.charAt(0))return void 0;for(var a=o.split("/").slice(1),s=0;s<a.length;s++){var u=a[s].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===r[u]){r=void 0;break}r=r[u]}if(void 0!==r)return this.resolveRefs(r,t)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},u.prototype.searchSchemas=function(e,t){if(e&&"object"==typeof e){"string"==typeof e.id&&a(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var r in e)if("enum"!==r)if("object"==typeof e[r])this.searchSchemas(e[r],t);else if("$ref"===r){var i=n(e[r]);i&&void 0===this.schemas[i]&&void 0===this.missingMap[i]&&(this.missingMap[i]=i)}}},u.prototype.addSchema=function(e,t){if("string"!=typeof e||"undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}(e=n(e)+"#")&&(e=n(e)),this.schemas[e]=t,delete this.missingMap[e],i(t,e),this.searchSchemas(t,e)},u.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},u.prototype.getSchemaUris=function(e){var t=[];for(var r in this.schemas)(!e||e.test(r))&&t.push(r);return t},u.prototype.getMissingUris=function(e){var t=[];for(var r in this.missingMap)(!e||e.test(r))&&t.push(r);return t},u.prototype.dropSchemas=function(){this.schemas={},this.reset()},u.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},u.prototype.validateAll=function(e,t,r,n,i){var a;if(t=this.resolveRefs(t),!t)return null;if(t instanceof o)return this.errors.push(t),t;var s,u=this.errors.length,l=null,c=null;if(this.checkRecursive&&e&&"object"==typeof e){if(a=!this.scanned.length,e[this.validatedSchemasKey]){var f=e[this.validatedSchemasKey].indexOf(t);if(-1!==f)return this.errors=this.errors.concat(e[this.validationErrorsKey][f]),null}if(Object.isFrozen(e)&&(s=this.scannedFrozen.indexOf(e),-1!==s)){var h=this.scannedFrozenSchemas[s].indexOf(t);if(-1!==h)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[s][h]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===s&&(s=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),l=this.scannedFrozenSchemas[s].length,this.scannedFrozenSchemas[s][l]=t,this.scannedFrozenValidationErrors[s][l]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(p){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}c=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][c]=t,e[this.validationErrorsKey][c]=[]}}var d=this.errors.length,m=this.validateBasic(e,t,i)||this.validateNumeric(e,t,i)||this.validateString(e,t,i)||this.validateArray(e,t,i)||this.validateObject(e,t,i)||this.validateCombinations(e,t,i)||this.validateFormat(e,t,i)||this.validateDefinedKeywords(e,t,i)||null;if(a){for(;this.scanned.length;){var g=this.scanned.pop();delete g[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(m||d!==this.errors.length)for(;r&&r.length||n&&n.length;){var y=r&&r.length?""+r.pop():null,v=n&&n.length?""+n.pop():null;m&&(m=m.prefixWith(y,v)),this.prefixErrors(d,y,v)}return null!==l?this.scannedFrozenValidationErrors[s][l]=this.errors.slice(u):null!==c&&(e[this.validationErrorsKey][c]=this.errors.slice(u)),this.handleError(m)},u.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var r=this.formatValidators[t.format].call(null,e,t);return"string"==typeof r||"number"==typeof r?this.createError(l.FORMAT_CUSTOM,{message:r}).prefixWith(null,"format"):r&&"object"==typeof r?this.createError(l.FORMAT_CUSTOM,{message:r.message||"?"},r.dataPath||null,r.schemaPath||"/format"):null},u.prototype.validateDefinedKeywords=function(e,t){for(var r in this.definedKeywords)for(var n=this.definedKeywords[r],i=0;i<n.length;i++){var o=n[i],a=o(e,t[r],t);if("string"==typeof a||"number"==typeof a)return this.createError(l.KEYWORD_CUSTOM,{key:r,message:a}).prefixWith(null,"format");if(a&&"object"==typeof a){var s=a.code||l.KEYWORD_CUSTOM;if("string"==typeof s){if(!l[s])throw new Error("Undefined error code (use defineError): "+s);s=l[s]}var u="object"==typeof a.message?a.message:{key:r,message:a.message||"?"},c=a.schemaPath||"/"+r.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(s,u,a.dataPath||null,c)}}return null},u.prototype.validateBasic=function(e,t,r){var n;return(n=this.validateType(e,t,r))?n.prefixWith(null,"type"):(n=this.validateEnum(e,t,r))?n.prefixWith(null,"type"):null},u.prototype.validateType=function(e,t){if(void 0===t.type)return null;var r=typeof e;null===e?r="null":Array.isArray(e)&&(r="array");var n=t.type;"object"!=typeof n&&(n=[n]);for(var i=0;i<n.length;i++){var o=n[i];if(o===r||"integer"===o&&"number"===r&&e%1===0)return null}return this.createError(l.INVALID_TYPE,{type:r,expected:n.join("/")})},u.prototype.validateEnum=function(t,r){if(void 0===r["enum"])return null;for(var n=0;n<r["enum"].length;n++){var i=r["enum"][n];if(e(t,i))return null}return this.createError(l.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(t):t})},u.prototype.validateNumeric=function(e,t,r){return this.validateMultipleOf(e,t,r)||this.validateMinMax(e,t,r)||null},u.prototype.validateMultipleOf=function(e,t){var r=t.multipleOf||t.divisibleBy;return void 0===r?null:"number"==typeof e&&e%r!==0?this.createError(l.NUMBER_MULTIPLE_OF,{value:e,multipleOf:r}):null},u.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(l.NUMBER_MINIMUM,{value:e,minimum:t.minimum}).prefixWith(null,"minimum");if(t.exclusiveMinimum&&e===t.minimum)return this.createError(l.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(l.NUMBER_MAXIMUM,{value:e,maximum:t.maximum}).prefixWith(null,"maximum");if(t.exclusiveMaximum&&e===t.maximum)return this.createError(l.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum}).prefixWith(null,"exclusiveMaximum")}return null},u.prototype.validateString=function(e,t,r){return this.validateStringLength(e,t,r)||this.validateStringPattern(e,t,r)||null},u.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(l.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength}).prefixWith(null,"minLength"):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(l.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength}).prefixWith(null,"maxLength"):null},u.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||void 0===t.pattern)return null;var r=new RegExp(t.pattern);return r.test(e)?null:this.createError(l.STRING_PATTERN,{pattern:t.pattern}).prefixWith(null,"pattern")},u.prototype.validateArray=function(e,t,r){return Array.isArray(e)?this.validateArrayLength(e,t,r)||this.validateArrayUniqueItems(e,t,r)||this.validateArrayItems(e,t,r)||null:null},u.prototype.validateArrayLength=function(e,t){var r;return void 0!==t.minItems&&e.length<t.minItems&&(r=this.createError(l.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems}).prefixWith(null,"minItems"),this.handleError(r))?r:void 0!==t.maxItems&&e.length>t.maxItems&&(r=this.createError(l.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems}).prefixWith(null,"maxItems"),this.handleError(r))?r:null},u.prototype.validateArrayUniqueItems=function(t,r){if(r.uniqueItems)for(var n=0;n<t.length;n++)for(var i=n+1;i<t.length;i++)if(e(t[n],t[i])){var o=this.createError(l.ARRAY_UNIQUE,{match1:n,match2:i}).prefixWith(null,"uniqueItems");if(this.handleError(o))return o}return null},u.prototype.validateArrayItems=function(e,t,r){if(void 0===t.items)return null;var n,i;if(Array.isArray(t.items)){for(i=0;i<e.length;i++)if(i<t.items.length){if(n=this.validateAll(e[i],t.items[i],[i],["items",i],r+"/"+i))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(l.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+i,"additionalItems"),this.handleError(n)))return n}else if(n=this.validateAll(e[i],t.additionalItems,[i],["additionalItems"],r+"/"+i))return n}else for(i=0;i<e.length;i++)if(n=this.validateAll(e[i],t.items,[i],["items"],r+"/"+i))return n;return null},u.prototype.validateObject=function(e,t,r){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,r)||this.validateObjectRequiredProperties(e,t,r)||this.validateObjectProperties(e,t,r)||this.validateObjectDependencies(e,t,r)||null},u.prototype.validateObjectMinMaxProperties=function(e,t){var r,n=Object.keys(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(r=this.createError(l.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties}).prefixWith(null,"minProperties"),this.handleError(r))?r:void 0!==t.maxProperties&&n.length>t.maxProperties&&(r=this.createError(l.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(r))?r:null},u.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var r=0;r<t.required.length;r++){var n=t.required[r];if(void 0===e[n]){var i=this.createError(l.OBJECT_REQUIRED,{key:n}).prefixWith(null,""+r).prefixWith(null,"required");if(this.handleError(i))return i}}return null},u.prototype.validateObjectProperties=function(e,t,r){var n;for(var i in e){var o=r+"/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),a=!1;if(void 0!==t.properties&&void 0!==t.properties[i]&&(a=!0,n=this.validateAll(e[i],t.properties[i],[i],["properties",i],o)))return n;if(void 0!==t.patternProperties)for(var s in t.patternProperties){var u=new RegExp(s);if(u.test(i)&&(a=!0,n=this.validateAll(e[i],t.patternProperties[s],[i],["patternProperties",s],o)))return n}if(a)this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(l.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(i,"additionalProperties"),this.handleError(n)))return n}else if(n=this.validateAll(e[i],t.additionalProperties,[i],["additionalProperties"],o))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[o]&&(this.unknownPropertyPaths[o]=!0)}return null},u.prototype.validateObjectDependencies=function(e,t,r){var n;if(void 0!==t.dependencies)for(var i in t.dependencies)if(void 0!==e[i]){var o=t.dependencies[i];if("string"==typeof o){if(void 0===e[o]&&(n=this.createError(l.OBJECT_DEPENDENCY_KEY,{key:i,missing:o}).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(o))for(var a=0;a<o.length;a++){var s=o[a];if(void 0===e[s]&&(n=this.createError(l.OBJECT_DEPENDENCY_KEY,{key:i,missing:s}).prefixWith(null,""+a).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,o,[],["dependencies",i],r))return n}return null},u.prototype.validateCombinations=function(e,t,r){return this.validateAllOf(e,t,r)||this.validateAnyOf(e,t,r)||this.validateOneOf(e,t,r)||this.validateNot(e,t,r)||null},u.prototype.validateAllOf=function(e,t,r){if(void 0===t.allOf)return null;for(var n,i=0;i<t.allOf.length;i++){var o=t.allOf[i];if(n=this.validateAll(e,o,[],["allOf",i],r))return n}return null},u.prototype.validateAnyOf=function(e,t,r){if(void 0===t.anyOf)return null;var n,i,o=[],a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var s=!0,u=0;u<t.anyOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.anyOf[u],f=this.errors.length,h=this.validateAll(e,c,[],["anyOf",u],r);if(null===h&&f===this.errors.length){if(this.errors=this.errors.slice(0,a),this.trackUnknownProperties){for(var p in this.knownPropertyPaths)i[p]=!0,delete n[p];for(var d in this.unknownPropertyPaths)i[d]||(n[d]=!0);s=!1;continue}return null}h&&o.push(h.prefixWith(null,""+u).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),s?(o=o.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(l.ANY_OF_MISSING,{},"","/anyOf",o)):void 0},u.prototype.validateOneOf=function(e,t,r){if(void 0===t.oneOf)return null;var n,i,o=null,a=[],s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var u=0;u<t.oneOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.oneOf[u],f=this.errors.length,h=this.validateAll(e,c,[],["oneOf",u],r);if(null===h&&f===this.errors.length){if(null!==o)return this.errors=this.errors.slice(0,s),this.createError(l.ONE_OF_MULTIPLE,{index1:o,index2:u},"","/oneOf");if(o=u,this.trackUnknownProperties){for(var p in this.knownPropertyPaths)i[p]=!0,delete n[p];for(var d in this.unknownPropertyPaths)i[d]||(n[d]=!0)}}else h&&a.push(h.prefixWith(null,""+u).prefixWith(null,"oneOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===o?(a=a.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(l.ONE_OF_MISSING,{},"","/oneOf",a)):(this.errors=this.errors.slice(0,s),null)},u.prototype.validateNot=function(e,t,r){if(void 0===t.not)return null;var n,i,o=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,i=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var a=this.validateAll(e,t.not,null,null,r),s=this.errors.slice(o);return this.errors=this.errors.slice(0,o),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=i),null===a&&0===s.length?this.createError(l.NOT_PASSED,{},"","/not"):null};var l={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},c={};for(var f in l)c[l[f]]=f;var h={INVALID_TYPE:"invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.name="ValidationError",o.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var r=0;r<this.subErrors.length;r++)this.subErrors[r].prefixWith(e,t);return this};var p={},d=s();return d.addLanguage("en-gb",h),d.tv4=d,d}),t("lodash/internals/isNative",[],function(){function e(e){return"function"==typeof e&&n.test(e)}var t=Object.prototype,r=t.toString,n=RegExp("^"+String(r).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return e}),t("lodash/internals/objectTypes",[],function(){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};return e}),t("lodash/objects/isObject",["../internals/objectTypes"],function(e){function t(t){return!(!t||!e[typeof t])}return t}),t("lodash/utilities/noop",[],function(){function e(){}return e}),t("lodash/internals/baseCreate",["./isNative","../objects/isObject","../utilities/noop"],function(e,t){function r(e){return t(e)?n(e):{}}var n=e(n=Object.create)&&n;return n||(r=function(){function e(){}return function(r){if(t(r)){e.prototype=r;var n=new e;e.prototype=null}return n||window.Object()}}()),r}),t("lodash/internals/setBindData",["./isNative","../utilities/noop"],function(e,t){var r={configurable:!1,enumerable:!1,value:null,writable:!1},n=function(){try{var t={},r=e(r=Object.defineProperty)&&r,n=r(t,t,t)&&r}catch(i){}return n}(),i=n?function(e,t){r.value=t,n(e,"__bindData__",r)}:t;return i}),t("lodash/internals/slice",[],function(){function e(e,t,r){t||(t=0),"undefined"==typeof r&&(r=e?e.length:0);for(var n=-1,i=r-t||0,o=Array(0>i?0:i);++n<i;)o[n]=e[t+n];return o}return e}),t("lodash/internals/baseBind",["./baseCreate","../objects/isObject","./setBindData","./slice"],function(e,t,r,n){function i(i){function o(){if(u){var r=n(u);a.apply(r,arguments)}if(this instanceof o){var i=e(s.prototype),c=s.apply(i,r||arguments);return t(c)?c:i}return s.apply(l,r||arguments)}var s=i[0],u=i[2],l=i[4];return r(o,i),o}var o=[],a=o.push;return i}),t("lodash/internals/baseCreateWrapper",["./baseCreate","../objects/isObject","./setBindData","./slice"],function(e,t,r,n){function i(o){function s(){var r=d?h:this;if(c){var o=n(c);a.apply(o,arguments)}if((f||g)&&(o||(o=n(arguments)),f&&a.apply(o,f),g&&o.length<p))return l|=16,i([u,y?l:-4&l,o,null,h,p]);if(o||(o=arguments),m&&(u=r[v]),this instanceof s){r=e(u.prototype);var b=u.apply(r,o);return t(b)?b:r}return u.apply(r,o)}var u=o[0],l=o[1],c=o[2],f=o[3],h=o[4],p=o[5],d=1&l,m=2&l,g=4&l,y=8&l,v=u;return r(s,o),s}var o=[],a=o.push;return i}),t("lodash/objects/isFunction",[],function(){function e(e){return"function"==typeof e}return e}),t("lodash/internals/createWrapper",["./baseBind","./baseCreateWrapper","../objects/isFunction","./slice"],function(e,t,r,n){function i(o,u,l,c,f,h){var p=1&u,d=2&u,m=4&u,g=16&u,y=32&u;if(!d&&!r(o))throw new TypeError;g&&!l.length&&(u&=-17,g=l=!1),y&&!c.length&&(u&=-33,y=c=!1);var v=o&&o.__bindData__;if(v&&v!==!0)return v=n(v),v[2]&&(v[2]=n(v[2])),v[3]&&(v[3]=n(v[3])),!p||1&v[1]||(v[4]=f),!p&&1&v[1]&&(u|=8),!m||4&v[1]||(v[5]=h),g&&a.apply(v[2]||(v[2]=[]),l),y&&s.apply(v[3]||(v[3]=[]),c),v[1]|=u,i.apply(null,v);var b=1==u||17===u?e:t;return b([o,u,l,c,f,h])}var o=[],a=o.push,s=o.unshift;return i}),t("lodash/functions/bind",["../internals/createWrapper","../internals/slice"],function(e,t){function r(r,n){return arguments.length>2?e(r,17,t(arguments,2),null,n):e(r,1,null,null,n)}return r}),t("lodash/utilities/identity",[],function(){function e(e){return e}return e}),t("lodash/support",["./internals/isNative"],function(e){var t=/\bthis\b/,r={};return r.funcDecomp=!e(window.WinRTError)&&t.test(function(){return this}),r.funcNames="string"==typeof Function.name,r}),t("lodash/internals/baseCreateCallback",["../functions/bind","../utilities/identity","./setBindData","../support"],function(e,t,r,n){function i(i,u,l){if("function"!=typeof i)return t;if("undefined"==typeof u||!("prototype"in i))return i;var c=i.__bindData__;if("undefined"==typeof c&&(n.funcNames&&(c=!i.name),c=c||!n.funcDecomp,!c)){var f=s.call(i);n.funcNames||(c=!o.test(f)),c||(c=a.test(f),r(i,c))}if(c===!1||c!==!0&&1&c[1])return i;switch(l){case 1:return function(e){return i.call(u,e)};case 2:return function(e,t){return i.call(u,e,t)};case 3:return function(e,t,r){return i.call(u,e,t,r)
};case 4:return function(e,t,r,n){return i.call(u,e,t,r,n)}}return e(i,u)}var o=/^\s*function[ \n\r\t]+\w/,a=/\bthis\b/,s=Function.prototype.toString;return i}),t("lodash/internals/shimKeys",["./objectTypes"],function(e){var t=Object.prototype,r=t.hasOwnProperty,n=function(t){var n,i=t,o=[];if(!i)return o;if(!e[typeof t])return o;for(n in i)r.call(i,n)&&o.push(n);return o};return n}),t("lodash/objects/keys",["../internals/isNative","./isObject","../internals/shimKeys"],function(e,t,r){var n=e(n=Object.keys)&&n,i=n?function(e){return t(e)?n(e):[]}:r;return i}),t("lodash/objects/forOwn",["../internals/baseCreateCallback","./keys","../internals/objectTypes"],function(e,t,r){var n=function(n,i,o){var a,s=n,u=s;if(!s)return u;if(!r[typeof s])return u;i=i&&"undefined"==typeof o?i:e(i,o,3);for(var l=-1,c=r[typeof s]&&t(s),f=c?c.length:0;++l<f;)if(a=c[l],i(s[a],a,n)===!1)return u;return u};return n}),t("lodash/collections/forEach",["../internals/baseCreateCallback","../objects/forOwn"],function(e,t){function r(r,n,i){var o=-1,a=r?r.length:0;if(n=n&&"undefined"==typeof i?n:e(n,i,3),"number"==typeof a)for(;++o<a&&n(r[o],o,r)!==!1;);else t(r,n);return r}return r}),t("lodash/objects/isString",[],function(){function e(e){return"string"==typeof e||e&&"object"==typeof e&&n.call(e)==t||!1}var t="[object String]",r=Object.prototype,n=r.toString;return e}),t("lodash/objects/values",["./keys"],function(e){function t(t){for(var r=-1,n=e(t),i=n.length,o=Array(i);++r<i;)o[r]=t[n[r]];return o}return t}),t("lodash/collections/toArray",["../objects/isString","../internals/slice","../objects/values"],function(e,t,r){function n(e){return e&&"number"==typeof e.length?t(e):r(e)}return n}),t("lodash/objects/assign",["../internals/baseCreateCallback","./keys","../internals/objectTypes"],function(e,t,r){var n=function(n,i,o){var a,s=n,u=s;if(!s)return u;var l=arguments,c=0,f="number"==typeof o?2:l.length;if(f>3&&"function"==typeof l[f-2])var h=e(l[--f-1],l[f--],2);else f>2&&"function"==typeof l[f-1]&&(h=l[--f]);for(;++c<f;)if(s=l[c],s&&r[typeof s])for(var p=-1,d=r[typeof s]&&t(s),m=d?d.length:0;++p<m;)a=d[p],u[a]=h?h(u[a],s[a]):s[a];return u};return n}),t("lib/types/_helpers",["lodash/objects/assign"],function(e){var t={defaults:function(t){return function(r){return r=r||{},e({},t||{},r)}},type:function(e,r){return 1===arguments.length&&(r=e,e={}),function(n){var i=t.defaults(e)(n),o=r(i);return o.opts=i,o}}};return t}),t("lib/types/integer",["./_helpers"],function(e){return e.type({minimum:0,maximum:1,multipleOf:null,exclusiveMaximum:!1,exclusiveMinimum:!1},function(e){var t=parseInt(e.exclusiveMinimum?e.minimum+1:e.minimum,10),r=parseInt(e.exclusiveMaximum?e.maximum-1:e.maximum,10);if(t>r)throw new Error("Apitizer/Integer type: Minimum can't be bigger than maximum. Passed options: "+JSON.stringify(e));return{generate:function(){var n=Math.floor(Math.random()*(r-t+1))+t;return e.multipleOf?n-n%e.multipleOf:n},validate:function(n){var i="number"==typeof n&&n>=t&&r>=n;return i&&n%e.multipleOf===0}}})}),t("lib/types/formats/date-time",["../_helpers","../integer"],function(e,t){var r=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;return e.type({minimum:function(){var e=new Date;return e.setTime(0),e}(),maximum:new Date},function(e){return{generate:function(){var r=new Date;return r.setTime(t({minimum:e.minimum.getTime(),maximum:e.maximum.getTime()}).generate()),r.toISOString()},validate:function(e){return"string"==typeof e&&r.test(e)}}})}),t("lib/types/formats/ipv4",["../_helpers","../integer"],function(e,t){var r=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;return e.type(function(){var e=t({minimum:1,maximum:255}).generate;return{generate:function(){return[e(),e(),e(),e()].join(".")},validate:function(e){return"string"==typeof e&&r.test(e)}}})}),t("lib/types/formats/ipv6",["../_helpers","../integer"],function(e){var t=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i;return e.type(function(){var e=function(){return Math.floor(65535*Math.random()).toString(16)};return{generate:function(){return[e(),e(),e(),e(),e(),e(),e(),e()].join(":").toUpperCase()},validate:function(e){return"string"==typeof e&&t.test(e)}}})}),t("lib/types/string",["./_helpers"],function(e){var t="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas feugiat pretium dictum. Praesent non erat nunc. Sed fringilla sollicitudin blandit. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Aliquam quam nulla, pretium in laoreet aliquet, lobortis vel dolor. Nullam vehicula ut sapien eget feugiat. Fusce vel imperdiet lacus. Ut eu vestibulum dui, et bibendum dui. Nam adipiscing nisi nec volutpat rutrum. Donec non quam dolor. In hac habitasse platea dictumst. Praesent scelerisque aliquam metus vel vehicula. Cras malesuada quam tincidunt libero aliquam, ut feugiat felis lacinia.";return e.type({generator:function(){return t},maxLength:1/0,minLength:0},function(e){return{generate:function(){var t,r="";do r+=e.generator()+" ";while(r.length<e.minLength);return r=r.replace(/^\s+|\s+$/g,""),e.maxLength<1/0&&(t=Math.max(r.lastIndexOf(" ",e.maxLength),e.minLength),r=r.substr(0,t||e.maxLength)),r},validate:function(t){var r="string"==typeof t;return r&&r.length>=e.minLength&&r.length<=e.maxLength}}})}),t("lib/types/formats/email",["../_helpers","../integer","../string"],function(e,t,r){var n=/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*$/;return e.type(function(){var e=r().generate().split(" "),i=t({maximum:e.length,exclusiveMaximum:!0}).generate;return{generate:function(){return[e[i()].replace(/[^a-zA-Z-_0-9]/g,""),"example.com"].join("@")},validate:function(e){return"string"==typeof e&&n.test(e)}}})}),t("lib/types/formats/hostname",["../_helpers","../integer","../string"],function(e,t){var r=/^(([a-zA-Z]{1})|([a-zA-Z]{1}[a-zA-Z]{1})|([a-zA-Z]{1}[0-9]{1})|([0-9]{1}[a-zA-Z]{1})|([a-zA-Z0-9][a-zA-Z0-9-_]{1,61}[a-zA-Z0-9]))\.([a-zA-Z]{2,6}|[a-zA-Z0-9-]{2,30}\.[a-zA-Z]{2,3})$/;return e.type(function(){var e=["com","info","net","biz","edu","hr"],n=t({maximum:e.length,exclusiveMaximum:!0}).generate;return{generate:function(){return["example",e[n()]].join(".")},validate:function(e){return"string"==typeof e&&r.test(e)}}})}),t("lib/types/formats/uri",["../_helpers","../integer","../string","./hostname"],function(e,t,r,n){var i=/(https?|ftp):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/;return e.type(function(){var e=t({maximum:1e3}).generate,o=t({maximum:3,exclusiveMaximum:!0}).generate,a=function(){return e()%o()===0},s=n().generate,u=r().generate().split(" "),l=t({maximum:u.length,exclusiveMaximum:!0}).generate,c=["http","https","ftp"],f=["html","php","aspx"],h=function(e){return e.replace(/[^a-zA-Z-_0-9]/g,"")};return{generate:function(){var e=c[o()]+"://",t=s(),r="",n="";return query="",fragment="",a()&&(r="/"+h(u[l()])),a()&&(n="/"+h(u[l()])+"."+f[o()]),a()&&(query="?"+h(u[l()])),a()&&(fragment="#"+h(u[l()])),e+t+r+n+query+fragment},validate:function(e){return"string"==typeof e&&i.test(e)}}})}),t("lib/types/formats/formats",["lib/types/formats/date-time","lib/types/formats/ipv4","lib/types/formats/ipv6","lib/types/formats/email","lib/types/formats/hostname","lib/types/formats/uri"],function(e,t,r,n,i,o){return{"date-time":e,ipv4:t,ipv6:r,email:n,hostname:i,uri:o}}),t("lib/types/decimal",["./_helpers"],function(e){return e.type({minimum:0,maximum:1,multipleOf:null,exclusiveMaximum:!1,exclusiveMinimum:!1},function(e){var t=e.exclusiveMinimum?e.minimum+.1:e.minimum,r=e.exclusiveMaximum?e.maximum-.1:e.maximum;return{generate:function(){var n=Math.random()*(r-t)+t;return e.multipleOf?n-n%e.multipleOf:n},validate:function(n){var i="number"==typeof n&&n>=t&&r>=n;return i&&n%e.multipleOf===0}}})}),t("lib/types/boolean",["./_helpers","./integer"],function(e,t){return e.type(function(){return{generate:function(){return t({minimum:0,maximum:10}).generate()%2===0},validate:function(e){return"boolean"==typeof e}}})}),t("lodash/objects/forIn",["../internals/baseCreateCallback","../internals/objectTypes"],function(e,t){var r=function(r,n,i){var o,a=r,s=a;if(!a)return s;if(!t[typeof a])return s;n=n&&"undefined"==typeof i?n:e(n,i,3);for(o in a)if(n(a[o],o,r)===!1)return s;return s};return r}),t("lodash/internals/arrayPool",[],function(){var e=[];return e}),t("lodash/internals/getArray",["./arrayPool"],function(e){function t(){return e.pop()||[]}return t}),t("lodash/internals/maxPoolSize",[],function(){var e=40;return e}),t("lodash/internals/releaseArray",["./arrayPool","./maxPoolSize"],function(e,t){function r(r){r.length=0,e.length<t&&e.push(r)}return r}),t("lodash/internals/baseIsEqual",["../objects/forIn","./getArray","../objects/isFunction","./objectTypes","./releaseArray"],function(e,t,r,n,i){function o(d,y,v,b,x,E){if(v){var O=v(d,y);if("undefined"!=typeof O)return!!O}if(d===y)return 0!==d||1/d==1/y;var _=typeof d,A=typeof y;if(!(d!==d||d&&n[_]||y&&n[A]))return!1;if(null==d||null==y)return d===y;var w=m.call(d),S=m.call(y);if(w==a&&(w=f),S==a&&(S=f),w!=S)return!1;switch(w){case u:case l:return+d==+y;case c:return d!=+d?y!=+y:0==d?1/d==1/y:d==+y;case h:case p:return d==String(y)}var R=w==s;if(!R){var j=g.call(d,"__wrapped__"),I=g.call(y,"__wrapped__");if(j||I)return o(j?d.__wrapped__:d,I?y.__wrapped__:y,v,b,x,E);if(w!=f)return!1;var C=d.constructor,P=y.constructor;if(C!=P&&!(r(C)&&C instanceof C&&r(P)&&P instanceof P)&&"constructor"in d&&"constructor"in y)return!1}var F=!x;x||(x=t()),E||(E=t());for(var T=x.length;T--;)if(x[T]==d)return E[T]==y;var N=0;if(O=!0,x.push(d),E.push(y),R){if(T=d.length,N=y.length,O=N==T,O||b)for(;N--;){var M=T,k=y[N];if(b)for(;M--&&!(O=o(d[M],k,v,b,x,E)););else if(!(O=o(d[N],k,v,b,x,E)))break}}else e(y,function(e,t,r){return g.call(r,t)?(N++,O=g.call(d,t)&&o(d[t],e,v,b,x,E)):void 0}),O&&!b&&e(d,function(e,t,r){return g.call(r,t)?O=--N>-1:void 0});return x.pop(),E.pop(),F&&(i(x),i(E)),O}var a="[object Arguments]",s="[object Array]",u="[object Boolean]",l="[object Date]",c="[object Number]",f="[object Object]",h="[object RegExp]",p="[object String]",d=Object.prototype,m=d.toString,g=d.hasOwnProperty;return o}),t("lodash/utilities/property",[],function(){function e(e){return function(t){return t[e]}}return e}),t("lodash/functions/createCallback",["../internals/baseCreateCallback","../internals/baseIsEqual","../objects/isObject","../objects/keys","../utilities/property"],function(e,t,r,n,i){function o(o,a,s){var u=typeof o;if(null==o||"function"==u)return e(o,a,s);if("object"!=u)return i(o);var l=n(o),c=l[0],f=o[c];return 1!=l.length||f!==f||r(f)?function(e){for(var r=l.length,n=!1;r--&&(n=t(e[l[r]],o[l[r]],null,!0)););return n}:function(e){var t=e[c];return f===t&&(0!==f||1/f==1/t)}}return o}),t("lodash/collections/reduce",["../functions/createCallback","../objects/forOwn"],function(e,t){function r(r,n,i,o){if(!r)return i;var a=arguments.length<3;n=e(n,o,4);var s=-1,u=r.length;if("number"==typeof u)for(a&&(i=r[++s]);++s<u;)i=n(i,r[s],s,r);else t(r,function(e,t,r){i=a?(a=!1,e):n(i,e,t,r)});return i}return r}),t("lib/types/composite",["./_helpers","./integer","lodash/collections/reduce"],function(e,t,r){return e.type({oneOf:[]},function(e){return{generate:function(){return console.log(e.anyOf),e.anyOf[t({minimum:0,maximum:e.anyOf.length-1}).generate()].generate()},validate:function(t){return r(e.anyOf,function(e,r){return r.validate(t)||e},!1)}}})}),t("lib/types/number",["./_helpers","./composite","./integer","./decimal"],function(e,t,r,n){return e.type({minimum:0,maximum:1,multipleOf:null,exclusiveMaximum:!1,exclusiveMinimum:!1},function(e){return t({anyOf:[r(e),n(e)]})})}),!function(){var e=function(t,r){var n=e.resolve(t,r||"/"),i=e.modules[n];if(!i)throw new Error("Failed to resolve module "+t+", tried "+n);var o=i._cached?i._cached:i();return o};e.paths=[],e.modules={},e.extensions=[".js",".coffee"],e._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},e.resolve=function(){return function(t,r){function n(t){if(e.modules[t])return t;for(var r=0;r<e.extensions.length;r++){var n=e.extensions[r];if(e.modules[t+n])return t+n}}function i(t){t=t.replace(/\/+$/,"");var r=t+"/package.json";if(e.modules[r]){var i=e.modules[r](),o=i.browserify;if("object"==typeof o&&o.main){var a=n(s.resolve(t,o.main));if(a)return a}else if("string"==typeof o){var a=n(s.resolve(t,o));if(a)return a}else if(i.main){var a=n(s.resolve(t,i.main));if(a)return a}}return n(t+"/index")}function o(e,t){for(var r=a(t),o=0;o<r.length;o++){var s=r[o],u=n(s+"/"+e);if(u)return u;var l=i(s+"/"+e);if(l)return l}var u=n(e);return u?u:void 0}function a(e){var t;t="/"===e?[""]:s.normalize(e).split("/");for(var r=[],n=t.length-1;n>=0;n--)if("node_modules"!==t[n]){var i=t.slice(0,n+1).join("/")+"/node_modules";r.push(i)}return r}if(r||(r="/"),e._core[t])return t;var s=e.modules.path(),u=r||".";if(t.match(/^(?:\.\.?\/|\/)/)){var l=n(s.resolve(u,t))||i(s.resolve(u,t));if(l)return l}var c=o(t,u);if(c)return c;throw new Error("Cannot find module '"+t+"'")}}(),e.alias=function(t,r){var n=e.modules.path(),i=null;try{i=e.resolve(t+"/package.json","/")}catch(o){i=e.resolve(t,"/")}for(var a=n.dirname(i),s=(Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t})(e.modules),u=0;u<s.length;u++){var l=s[u];if(l.slice(0,a.length+1)===a+"/"){var c=l.slice(a.length);e.modules[r+c]=e.modules[a+c]}else l===a&&(e.modules[r]=e.modules[a])}},e.define=function(t,r){var n=e._core[t]?"":e.modules.path().dirname(t),i=function(t){return e(t,n)};i.resolve=function(t){return e.resolve(t,n)},i.modules=e.modules,i.define=e.define;var o={exports:{}};e.modules[t]=function(){return e.modules[t]._cached=o.exports,r.call(o.exports,i,o,o.exports,n,t),e.modules[t]._cached=o.exports,o.exports}},"undefined"==typeof process&&(process={}),process.nextTick||(process.nextTick=function(){var e=[],t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;return t&&window.addEventListener("message",function(t){if(t.source===window&&"browserify-tick"===t.data&&(t.stopPropagation(),e.length>0)){var r=e.shift();r()}},!0),function(r){t?(e.push(r),window.postMessage("browserify-tick","*")):setTimeout(r,0)}}()),process.title||(process.title="browser"),process.binding||(process.binding=function(t){if("evals"===t)return e("vm");throw new Error("No such module")}),process.cwd||(process.cwd=function(){return"."}),e.define("path",function(e,t,r){function n(e,t){for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}function i(e,t){for(var r=0,n=e.length;n>=0;n--){var i=e[n];"."==i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var o=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;r.resolve=function(){for(var e="",t=!1,r=arguments.length;r>=-1&&!t;r--){var o=r>=0?arguments[r]:process.cwd();"string"==typeof o&&o&&(e=o+"/"+e,t="/"===o.charAt(0))}return e=i(n(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},r.normalize=function(e){var t="/"===e.charAt(0),r="/"===e.slice(-1);return e=i(n(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e){return e&&"string"==typeof e}).join("/"))},r.dirname=function(e){var t=o.exec(e)[1]||"",r=!1;return t?1===t.length||r&&t.length<=3&&":"===t.charAt(1)?t:t.substring(0,t.length-1):"."},r.basename=function(e,t){var r=o.exec(e)[2]||"";return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return o.exec(e)[3]||""}}),e.define("/node_modules/ret/package.json",function(e,t){t.exports={main:"./lib/index.js"}}),e.define("/node_modules/ret/lib/index.js",function(e,t){var r=e("./util"),n=e("./types"),i=e("./sets"),o=e("./positions");t.exports=function(e){var t,a,s=0,u={type:n.ROOT,stack:[]},l=u,c=u.stack,f=[],h=function(t){r.error(e,"Nothing to repeat at column "+(t-1))},p=r.strToChars(e);for(t=p.length;t>s;)switch(a=p[s++]){case"\\":switch(a=p[s++]){case"b":c.push(o.wordBoundary());break;case"B":c.push(o.nonWordBoundary());break;case"w":c.push(i.words());break;case"W":c.push(i.notWords());break;case"d":c.push(i.ints());break;case"D":c.push(i.notInts());break;case"s":c.push(i.whitespace());break;case"S":c.push(i.notWhitespace());break;default:c.push(/\d/.test(a)?{type:n.REFERENCE,value:parseInt(a,10)}:{type:n.CHAR,value:a.charCodeAt(0)})}break;case"^":c.push(o.begin());break;case"$":c.push(o.end());break;case"[":var d;"^"===p[s]?(d=!0,s++):d=!1;var m=r.tokenizeClass(p.slice(s),e);s+=m[1],c.push({type:n.SET,set:m[0],not:d});break;case".":c.push(i.anyChar());break;case"(":var g={type:n.GROUP,stack:[],remember:!0};a=p[s],"?"===a&&(a=p[s+1],s+=2,"="===a?g.followedBy=!0:"!"===a?g.notFollowedBy=!0:":"!==a&&r.error(e,"Invalid group, character '"+a+"' after '?' at column "+(s-1)),g.remember=!1),c.push(g),f.push(l),l=g,c=g.stack;break;case")":0===f.length&&r.error(e,"Unmatched ) at column "+(s-1)),l=f.pop(),c=l.options?l.options[l.options.length-1]:l.stack;break;case"|":l.options||(l.options=[l.stack],delete l.stack);var y=[];l.options.push(y),c=y;break;case"{":var v,b,x=/^(\d+)(,(\d+)?)?\}/.exec(p.slice(s));null!==x?(v=parseInt(x[1],10),b=x[2]?x[3]?parseInt(x[3],10):1/0:v,s+=x[0].length,c.push({type:n.REPETITION,min:v,max:b,value:c.pop()})):c.push({type:n.CHAR,value:123});break;case"?":0===c.length&&h(s),c.push({type:n.REPETITION,min:0,max:1,value:c.pop()});break;case"+":0===c.length&&h(s),c.push({type:n.REPETITION,min:1,max:1/0,value:c.pop()});break;case"*":0===c.length&&h(s),c.push({type:n.REPETITION,min:0,max:1/0,value:c.pop()});break;default:c.push({type:n.CHAR,value:a.charCodeAt(0)})}return 0!==f.length&&r.error(e,"Unterminated group"),u},t.exports.types=n}),e.define("/node_modules/ret/lib/util.js",function(e,t,r){var n=e("./types"),i=e("./sets"),o="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?",a={0:0,t:9,n:10,v:11,f:12,r:13};r.strToChars=function(e){var t=/(\[\\b\])|\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|(0?[0-7]{2})|c([@A-Z\[\\\]\^?])|([0tnvfr]))/g;return e=e.replace(t,function(e,t,r,n,i,s,u){var l=t?8:r?parseInt(r,16):n?parseInt(n,16):i?parseInt(i,8):s?o.indexOf(s):u?a[u]:void 0,c=String.fromCharCode(l);return/[\[\]{}\^$.|?*+()]/.test(c)&&(c="\\"+c),c})},r.tokenizeClass=function(e,t){for(var o,a,s=[],u=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\\]))-(?:\\)?([^\]]))|(\])|(?:\\)?(.)/g;null!=(o=u.exec(e));)if(o[1])s.push(i.words());else if(o[2])s.push(i.ints());else if(o[3])s.push(i.whitespace());else if(o[4])s.push(i.notWords());else if(o[5])s.push(i.notInts());else if(o[6])s.push(i.notWhitespace());else if(o[7])s.push({type:n.RANGE,from:(o[8]||o[9]).charCodeAt(0),to:o[10].charCodeAt(0)});else{if(!(a=o[12]))return[s,u.lastIndex];s.push({type:n.CHAR,value:a.charCodeAt(0)})}r.error(t,"Unterminated character class")},r.error=function(e,t){throw new SyntaxError("Invalid regular expression: /"+e+"/: "+t)}}),e.define("/node_modules/ret/lib/types.js",function(e,t){t.exports={ROOT:0,GROUP:1,POSITION:2,SET:3,RANGE:4,REPETITION:5,REFERENCE:6,CHAR:7}}),e.define("/node_modules/ret/lib/sets.js",function(e,t,r){var n=e("./types"),i=function(){return[{type:n.RANGE,from:48,to:57}]},o=function(){return[{type:n.RANGE,from:97,to:122},{type:n.RANGE,from:65,to:90}].concat(i())},a=function(){return[{type:n.CHAR,value:12},{type:n.CHAR,value:10},{type:n.CHAR,value:13},{type:n.CHAR,value:9},{type:n.CHAR,value:11},{type:n.CHAR,value:160},{type:n.CHAR,value:5760},{type:n.CHAR,value:6158},{type:n.CHAR,value:8192},{type:n.CHAR,value:8193},{type:n.CHAR,value:8194},{type:n.CHAR,value:8195},{type:n.CHAR,value:8196},{type:n.CHAR,value:8197},{type:n.CHAR,value:8198},{type:n.CHAR,value:8199},{type:n.CHAR,value:8200},{type:n.CHAR,value:8201},{type:n.CHAR,value:8202},{type:n.CHAR,value:8232},{type:n.CHAR,value:8233},{type:n.CHAR,value:8239},{type:n.CHAR,value:8287},{type:n.CHAR,value:12288}]};r.words=function(){return{type:n.SET,set:o(),not:!1}},r.notWords=function(){return{type:n.SET,set:o(),not:!0}},r.ints=function(){return{type:n.SET,set:i(),not:!1}},r.notInts=function(){return{type:n.SET,set:i(),not:!0}},r.whitespace=function(){return{type:n.SET,set:a(),not:!1}},r.notWhitespace=function(){return{type:n.SET,set:a(),not:!0}},r.anyChar=function(){return{type:n.SET,set:[{type:n.CHAR,value:10}],not:!0}}}),e.define("/node_modules/ret/lib/positions.js",function(e,t,r){var n=e("./types");r.wordBoundary=function(){return{type:n.POSITION,value:"b"}},r.nonWordBoundary=function(){return{type:n.POSITION,value:"B"}},r.begin=function(){return{type:n.POSITION,value:"^"}},r.end=function(){return{type:n.POSITION,value:"$"}}}),e.define("/randexp.js",function(e,t){function r(e,t){return e+Math.floor(Math.random()*(1+t-e))}function n(e){return e+(e>=97&&122>=e?-32:e>=65&&90>=e?32:0)}function i(e,t,r,n){return r>=e&&t>=r?{from:r,to:Math.min(t,n)}:n>=e&&t>=n?{from:Math.max(e,r),to:n}:!1}function o(e,t){var r,n,i,o;if((n=e.length)!==t.length)return!1;for(r=0;n>r;r++){o=e[r];for(i in o)if(o.hasOwnProperty(i)&&o[i]!==t[r][i])return!1}return!0}function a(e,t){for(var r=0,n=e.length;n>r;r++){var i=e[r];if(i.not!==t.not&&o(i.set,t.set))return!0}return!1}function s(e,t,r){for(var o,u,l=[],c=!1,h=0,p=e.length;p>h;h++)switch(o=e[h],o.type){case f.CHAR:if(u=o.value,u===t||r&&n(u)===t)return!0;break;case f.RANGE:if(o.from<=t&&t<=o.to||r&&((u=i(97,122,o.from,o.to))!==!1&&u.from<=t&&t<=u.to||(u=i(65,90,o.from,o.to))!==!1&&u.from<=t&&t<=u.to))return!0;break;case f.SET:if(l.length>0&&a(l,o)?c=!0:l.push(o),!c&&s(o.set,t,r)!==o.not)return!0}return!1}function u(e,t){return String.fromCharCode(t&&Math.random()>.5?n(e):e)}function l(e,t,n){var i,o,a,c,h,p,d;switch(e.type){case f.ROOT:case f.GROUP:if(e.notFollowedBy)return"";for(e.remember&&(i=t.push(!1)-1),o=e.options?e.options[Math.floor(Math.random()*e.options.length)]:e.stack,a="",h=0,p=o.length;p>h;h++)a+=l.call(this,o[h],t);return e.remember&&(t[i]=a),a;case f.POSITION:return"";case f.SET:if(n=!!n,d=n!==e.not,!d)return e.set.length?l.call(this,e.set[Math.floor(Math.random()*e.set.length)],t,d):"";for(;;){var m=this.anyRandChar(),g=m.charCodeAt(0);if(!s(e.set,g,this.ignoreCase))return m}break;case f.RANGE:return u(r(e.from,e.to),this.ignoreCase);case f.REPETITION:for(c=r(e.min,1/0===e.max?e.min+this.max:e.max),a="",h=0;c>h;h++)a+=l.call(this,e.value,t);return a;case f.REFERENCE:return t[e.value-1]||"";case f.CHAR:return u(e.value,this.ignoreCase)}}var c=e("ret"),f=c.types,h=t.exports=function(e,t){if(e instanceof RegExp)this.ignoreCase=e.ignoreCase,this.multiline=e.multiline,"number"==typeof e.max&&(this.max=e.max),"function"==typeof e.anyRandChar&&(this.anyRandChar=e.anyRandChar),e=e.source;else{if("string"!=typeof e)throw new Error("Expected a regexp or string");this.ignoreCase=t&&-1!==t.indexOf("i"),this.multiline=t&&-1!==t.indexOf("m")}this.tokens=c(e)};h.prototype.max=100,h.prototype.anyRandChar=function(){return String.fromCharCode(r(0,65535))},h.prototype.gen=function(){return l.call(this,this.tokens,[])};var p=h.randexp=function(e,t){var r;return void 0===e._randexp?(r=new h(e,t),e._randexp=r):(r=e._randexp,"number"==typeof e.max&&(r.max=e.max),"function"==typeof e.anyRandChar&&(r.anyRandChar=e.anyRandChar)),r.gen()};h.sugar=function(){RegExp.prototype.gen=function(){return p(this)}}}),!function(e,r){"function"==typeof t&&"object"==typeof t.amd?t(e,function(){return r}):"undefined"!=typeof window&&(window[e]=r)}("RandExp",e("/randexp.js"))}(),t("RandExp",function(){}),t("lib/types/randexp",["RandExp","./_helpers"],function(e,t){return t.type({pattern:null},function(t){return{generate:function(){return t.pattern&&new e(t.pattern).gen()},validate:function(e){return t.pattern&&t.pattern.test(e)}}})}),t("lodash/collections/filter",["../functions/createCallback","../objects/forOwn"],function(e,t){function r(r,n,i){var o=[];n=e(n,i,3);var a=-1,s=r?r.length:0;if("number"==typeof s)for(;++a<s;){var u=r[a];n(u,a,r)&&o.push(u)}else t(r,function(e,t,r){n(e,t,r)&&o.push(e)});return o}return r}),t("lodash/objects/isEqual",["../internals/baseCreateCallback","../internals/baseIsEqual"],function(e,t){function r(r,n,i,o){return t(r,n,"function"==typeof i&&e(i,o,2))}return r}),t("lib/types/array",["./_helpers","./integer","lodash/collections/filter","lodash/objects/isEqual"],function(e,t,r,n){return e.type({maxItems:10,minItems:0,uniqueItems:!1,typeDef:{generate:function(){return{}}}},function(e){var i=function(e,t){return r(e,function(e){return n(e,t)}).length>0};return{generate:function(){for(var r,n,o=t({minimum:e.minItems,maximum:e.maxItems}).generate(),a=[];a.length<o;)r=e.typeDef.generate(),n=e.uniqueItems?i(a,r):!1,n||a.push(r);return a},validate:function(t){var r,n,o=t.length>=e.minItems&&t.length<=e.maxItems;if(o)for(;t.length;)if(r=t.shift(),n=i(t,r))return!1;return o}}})}),t("lib/types/autoincrement",["./_helpers"],function(e){return e.type(function(){var e=1;return{generate:function(){return e++},validate:function(t){return e>=t}}})});var r=["string","integer","decimal","boolean","composite","number","randexp","array","autoincrement"],n=function(e,t,i){var o=n.length,a=t(arguments).slice(o,arguments.length);return types={},e(r,function(e,t){types[e]=a[t]}),types.formats=i,types};return t("lib/types",["lodash/collections/forEach","lodash/collections/toArray","lib/types/formats/formats","lib/types/string","lib/types/integer","lib/types/decimal","lib/types/boolean","lib/types/composite","lib/types/number","lib/types/randexp","lib/types/array","lib/types/autoincrement"],n),t("lodash/internals/baseIndexOf",[],function(){function e(e,t,r){for(var n=(r||0)-1,i=e?e.length:0;++n<i;)if(e[n]===t)return n;return-1}return e}),t("lodash/objects/isArray",["../internals/isNative"],function(e){var t="[object Array]",r=Object.prototype,n=r.toString,i=e(i=Array.isArray)&&i,o=i||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&n.call(e)==t||!1};return o}),t("lodash/collections/contains",["../internals/baseIndexOf","../objects/forOwn","../objects/isArray","../objects/isString"],function(e,t,r,n){function i(i,a,s){var u=-1,l=e,c=i?i.length:0,f=!1;return s=(0>s?o(0,c+s):s)||0,r(i)?f=l(i,a,s)>-1:"number"==typeof c?f=(n(i)?i.indexOf(a,s):l(i,a,s))>-1:t(i,function(e){return++u>=s?!(f=e===a):void 0}),f}var o=Math.max;return i}),function(e){t("rlite",[],function(){return function(){function t(){this.rules={}}return t.prototype={add:function(e,t){for(var r=e.split("/"),n=this.rules,i=0;i<r.length;++i){var o=r[i],a=o.length&&":"==o.charAt(0)?":":o;n[a]?n=n[a]:(n=n[a]={},":"==a&&(n["@name"]=o.substr(1,o.length-1)))}n["@"]=t},run:function(e){e&&e.length&&(e=e.replace("/?","?"),"/"==e.charAt(0)&&(e=e.substr(1,e.length)),e.length&&"/"==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)));var t=this.rules,r=e.split("?",2),n=r[0].split("/",50),i={};return function(){for(var e=0;e<n.length&&t;++e){var r=n[e],o=r.toLowerCase(),a=t[o];!a&&(a=t[":"])&&(i[a["@name"]]=r),t=a}}(),function(e){for(var t=e.split("&",50),r=0;r<t.length;++r){var n=t[r].split("=",2);2==n.length&&(i[n[0]]=n[1])}}(2==r.length?r[1]:""),t&&t["@"]?(t["@"]({url:e,params:i}),!0):!1}},e.Rlite=t}.apply(e,arguments)})}(this),function(e){t("fakexmlhttprequest",[],function(){return function(){return function(){function e(e){var t;if("undefined"!=typeof DOMParser){var r=new DOMParser;t=r.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t}function t(e,t){t.addEventListener(e,function(r){var n=t["on"+e];n&&"function"==typeof n&&n(r)})}function r(){this.readyState=r.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="",this._eventListeners={};for(var e=["loadstart","load","abort","loadend"],n=e.length-1;n>=0;n--)t(e[n],this)}function n(e){if(e.readyState!==r.OPENED)throw new Error("INVALID_STATE_ERR");if(e.sendFlag)throw new Error("INVALID_STATE_ERR")}function i(e){if(e.readyState==r.DONE)throw new Error("Request done")}function o(e){if(e.async&&e.readyState!=r.HEADERS_RECEIVED)throw new Error("No headers received")}function a(e){if("string"!=typeof e){var t=new Error("Attempted to respond to fake XMLHttpRequest with "+e+", which is not a string.");throw t.name="InvalidBodyException",t}}var s=function(e,t,r,n){this.type=e,this.bubbles=t,this.cancelable=r,this.target=n};s.prototype={stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}};var u={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},l={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0};r.UNSENT=0,r.OPENED=1,r.HEADERS_RECEIVED=2,r.LOADING=3,r.DONE=4,r.prototype={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4,async:!0,open:function(e,t,n,i,o){this.method=e,this.url=t,this.async="boolean"==typeof n?n:!0,this.username=i,this.password=o,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1,this._readyStateChange(r.OPENED)},addEventListener:function(e,t){this._eventListeners[e]=this._eventListeners[e]||[],this._eventListeners[e].push(t)
},removeEventListener:function(e,t){for(var r=this._eventListeners[e]||[],n=0,i=r.length;i>n;++n)if(r[n]==t)return r.splice(n,1)},dispatchEvent:function(e){for(var t=e.type,r=this._eventListeners[t]||[],n=0;n<r.length;n++)"function"==typeof r[n]?r[n].call(this,e):r[n].handleEvent(e);return!!e.defaultPrevented},setRequestHeader:function(e,t){if(n(this),l[e]||/^(Sec-|Proxy-)/.test(e))throw new Error('Refused to set unsafe header "'+e+'"');this.requestHeaders[e]?this.requestHeaders[e]+=","+t:this.requestHeaders[e]=t},send:function(e){if(n(this),!/^(get|head)$/i.test(this.method)){if(this.requestHeaders["Content-Type"]){var t=this.requestHeaders["Content-Type"].split(";");this.requestHeaders["Content-Type"]=t[0]+";charset=utf-8"}else this.requestHeaders["Content-Type"]="text/plain;charset=utf-8";this.requestBody=e}this.errorFlag=!1,this.sendFlag=this.async,this._readyStateChange(r.OPENED),"function"==typeof this.onSend&&this.onSend(this),this.dispatchEvent(new s("loadstart",!1,!1,this))},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>r.UNSENT&&this.sendFlag&&(this._readyStateChange(r.DONE),this.sendFlag=!1),this.readyState=r.UNSENT,this.dispatchEvent(new s("abort",!1,!1,this)),"function"==typeof this.onerror&&this.onerror()},getResponseHeader:function(e){if(this.readyState<r.HEADERS_RECEIVED)return null;if(/^Set-Cookie2?$/i.test(e))return null;e=e.toLowerCase();for(var t in this.responseHeaders)if(t.toLowerCase()==e)return this.responseHeaders[t];return null},getAllResponseHeaders:function(){if(this.readyState<r.HEADERS_RECEIVED)return"";var e="";for(var t in this.responseHeaders)this.responseHeaders.hasOwnProperty(t)&&!/^Set-Cookie2?$/i.test(t)&&(e+=t+": "+this.responseHeaders[t]+"\r\n");return e},_readyStateChange:function(e){this.readyState=e,"function"==typeof this.onreadystatechange&&this.onreadystatechange(),this.dispatchEvent(new s("readystatechange")),this.readyState==r.DONE&&(this.dispatchEvent(new s("load",!1,!1,this)),this.dispatchEvent(new s("loadend",!1,!1,this)))},_setResponseHeaders:function(e){this.responseHeaders={};for(var t in e)e.hasOwnProperty(t)&&(this.responseHeaders[t]=e[t]);this.async?this._readyStateChange(r.HEADERS_RECEIVED):this.readyState=r.HEADERS_RECEIVED},_setResponseBody:function(t){i(this),o(this),a(t);var n=this.chunkSize||10,s=0;this.responseText="";do this.async&&this._readyStateChange(r.LOADING),this.responseText+=t.substring(s,s+n),s+=n;while(s<t.length);var u=this.getResponseHeader("Content-Type");if(this.responseText&&(!u||/(text\/xml)|(application\/xml)|(\+xml)/.test(u)))try{this.responseXML=e(this.responseText)}catch(l){}this.async?this._readyStateChange(r.DONE):this.readyState=r.DONE},respond:function(e,t,r){this._setResponseHeaders(t||{}),this.status="number"==typeof e?e:200,this.statusText=u[this.status],this._setResponseBody(r||"")}};var c=r;window.FakeXMLHttpRequest=c}.call(this),e.FakeXMLHttpRequest=FakeXMLHttpRequest}.apply(e,arguments)})}(this),function(){var e={};e.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#)/,""),e?e.trim().split("&").reduce(function(e,t){var r=t.replace(/\+/g," ").split("="),n=r[0],i=r[1];return n=decodeURIComponent(n),i=void 0===i?null:decodeURIComponent(i),e.hasOwnProperty(n)?Array.isArray(e[n])?e[n].push(i):e[n]=[e[n],i]:e[n]=i,e},{}):{})},e.stringify=function(e){return e?Object.keys(e).map(function(t){var r=e[t];return Array.isArray(r)?r.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):encodeURIComponent(t)+"="+encodeURIComponent(r)}).join("&"):""},"function"==typeof t&&t.amd?t("querystring",[],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:window.queryString=e}(),t("lib/fixtures",["lodash/collections/reduce","lodash/collections/contains","lodash/objects/assign","lodash/collections/forEach","lib/types/integer","rlite","fakexmlhttprequest","querystring"],function(e,t,r,n,i,o,a,s){var u=function(){return 200},l=function(e){return e.replace(/\{([a-zA-Z0-9_-]*)\}/g,function(e,t){return":"+t})},c=function(e){return e=e||"get","__"+e.toLowerCase()+"__"},f=function(e){return e.replace(/\/{2,}/g,"/")},h=function(e){var t=e.split(" ");return 1===t.length?t.unshift(c()):t[0]=c(t[0]),f(l(t.join("/"))).toLowerCase()},p=function(e){for(var t in e)e.hasOwnProperty(t)&&"string"==typeof e[t]&&(e[t]=decodeURIComponent(e[t]).replace(/[+]/g," "),"true"===e[t]?e[t]=!0:"false"===e[t]&&(e[t]=!1));return e},d=new o,m=a.prototype.open,g=null,y=function(e,t){d.add(e,function(e){g=function(r){return t(p(e.params||{}),r)}})},v=function(e){var t=f([c(e.method),e.url].join("/"));d.run(t)?!function(t){setTimeout(function(){var r,n,i;r=e.requestHeaders["Content-Type"]&&e.requestHeaders["Content-Type"].indexOf("json")>-1?JSON.parse(e.requestBody):s.parse(e.requestBody);try{n=t(r),e.respond(200,{"Content-Type":"application/json"},JSON.stringify(n))}catch(o){i=o.status||406,delete o.status,e.respond(i,{"Content-Type":"application/json"},JSON.stringify(o))}},u())}(g):setTimeout(function(){e.respond(404,{"Content-Type":"application/json"})},1)};a.prototype.open=function(){var e=m.apply(this,arguments);return v(this),e};var b=function(e,t){var r=h(e);y(r,t)},x={findOne:"GET %url%/{id}",findAll:"GET %url%",create:"POST %url%",update:"PUT %url%/{id}",destroy:"DELETE %url%/{id}"},E=/%url%/;return b.resource=function(e,t){n(x,function(r,n){b(r.replace(E,e),t.API[n])})},b.delay=function(e,t){return 1===arguments.length?u=function(){return Math.max(e,1)}:2===arguments.length&&(u=i({minimum:Math.max(e,1),maximum:t}).generate),[e,t]},b.responder=a,b}),function(e){t("taffy",[],function(){return function(){var t,exports,r;return function(){var e,n,i,o,a,s,u,l,c,f,h,p,d,m,g,y,v,b,x,E,O,_,A;if(!t)for(a="2.7",s=1,u="000000",l=1e3,c={},f=function(e){return t.isArray(e)||t.isObject(e)?e:JSON.parse(e)},x=function(e,t){return E(e,function(e){return t.indexOf(e)>=0})},E=function(e,t,r){var n=[];return null==e?n:Array.prototype.filter&&e.filter===Array.prototype.filter?e.filter(t,r):(h(e,function(e,i,o){t.call(r,e,i,o)&&(n[n.length]=e)}),n)},A=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},_=function(e){var t=r.isArray(e)?[]:r.isObject(e)?{}:null;if(null===e)return e;for(var n in e)t[n]=A(e[n])?e[n].toString():r.isArray(e[n])||r.isObject(e[n])?_(e[n]):e[n];return t},O=function(e){var t=JSON.stringify(e);return null===t.match(/regex/)?t:JSON.stringify(_(e))},h=function(e,t,n){var i,o,a,s;if(e&&(r.isArray(e)&&1===e.length||!r.isArray(e)))t(r.isArray(e)?e[0]:e,0);else for(a=0,e=r.isArray(e)?e:[e],s=e.length;s>a&&(o=e[a],r.isUndefined(o)&&!n||(i=t(o,a),i!==r.EXIT));a++);},p=function(e,t){var n,i,o=0;for(i in e)if(e.hasOwnProperty(i)&&(n=t(e[i],i,o++),n===r.EXIT))break},c.extend=function(e,t){c[e]=function(){return t.apply(this,arguments)}},d=function(e){var n;return r.isString(e)&&/[t][0-9]*[r][0-9]*/i.test(e)?!0:r.isObject(e)&&e.___id&&e.___s?!0:r.isArray(e)?(n=!0,h(e,function(e){return d(e)?void 0:(n=!1,t.EXIT)}),n):!1},g=function(e,n){var i=!0;return h(n,function(n){switch(r.typeOf(n)){case"function":if(!n.apply(e))return i=!1,t.EXIT;break;case"array":i=1===n.length?g(e,n[0]):2===n.length?g(e,n[0])||g(e,n[1]):3===n.length?g(e,n[0])||g(e,n[1])||g(e,n[2]):4===n.length?g(e,n[0])||g(e,n[1])||g(e,n[2])||g(e,n[3]):!1,n.length>4&&h(n,function(t){g(e,t)&&(i=!0)})}}),i},m=function(e){var n=[];return r.isString(e)&&/[t][0-9]*[r][0-9]*/i.test(e)&&(e={___id:e}),r.isArray(e)?(h(e,function(e){n.push(m(e))}),e=function(){var e=this,t=!1;return h(n,function(r){g(e,r)&&(t=!0)}),t}):r.isObject(e)?(r.isObject(e)&&e.___id&&e.___s&&(e={___id:e.___id}),p(e,function(e,i){r.isObject(e)||(e={is:e}),p(e,function(e,o){var a,s=[];a="hasAll"===o?function(e,t){t(e)}:h,a(e,function(e){var n,a=!0;n=function(){var n,s=this[i],u="==",l="!=",c="===",f="<",h=">",p="<=",d=">=",m="!==";return"undefined"==typeof s?!1:(0===o.indexOf("!")&&o!==l&&o!==m&&(a=!1,o=o.substring(1,o.length)),n="regex"===o?e.test(s):"lt"===o||o===f?e>s:"gt"===o||o===h?s>e:"lte"===o||o===p?e>=s:"gte"===o||o===d?s>=e:"left"===o?0===s.indexOf(e):"leftnocase"===o?0===s.toLowerCase().indexOf(e.toLowerCase()):"right"===o?s.substring(s.length-e.length)===e:"rightnocase"===o?s.toLowerCase().substring(s.length-e.length)===e.toLowerCase():"like"===o?s.indexOf(e)>=0:"likenocase"===o?s.toLowerCase().indexOf(e.toLowerCase())>=0:o===c||"is"===o?s===e:o===u?s==e:o===m?s!==e:o===l?s!=e:"isnocase"===o?s.toLowerCase?s.toLowerCase()===e.toLowerCase():s===e:"has"===o?r.has(s,e):"hasall"===o?r.hasAll(s,e):"contains"===o?t.isArray(s)&&s.indexOf(e)>-1:-1!==o.indexOf("is")||t.isNull(s)||t.isUndefined(s)||t.isObject(e)||t.isArray(e)?r[o]&&r.isFunction(r[o])&&0===o.indexOf("is")?r[o](s)===e:r[o]&&r.isFunction(r[o])?r[o](s,e):!1:e===s[o],n=n&&!a?!1:n||a?n:!0)},s.push(n)}),n.push(1===s.length?s[0]:function(){var e=this,t=!1;return h(s,function(r){r.apply(e)&&(t=!0)}),t})})}),e=function(){var e=this,t=!0;return t=(1!==n.length||n[0].apply(e))&&(2!==n.length||n[0].apply(e)&&n[1].apply(e))&&(3!==n.length||n[0].apply(e)&&n[1].apply(e)&&n[2].apply(e))&&(4!==n.length||n[0].apply(e)&&n[1].apply(e)&&n[2].apply(e)&&n[3].apply(e))?!0:!1,n.length>4&&h(n,function(r){g(e,r)||(t=!1)}),t}):r.isFunction(e)?e:void 0},v=function(e,n){var i=function(e,i){var o=0;return r.each(n,function(n){var a,s,u,l,c;if(a=n.split(" "),s=a[0],u=1===a.length?"logical":a[1],"logical"===u)l=y(e[s]),c=y(i[s]),r.each(l.length<=c.length?l:c,function(e,r){return l[r]<c[r]?(o=-1,t.EXIT):l[r]>c[r]?(o=1,t.EXIT):void 0});else if("logicaldesc"===u)l=y(e[s]),c=y(i[s]),r.each(l.length<=c.length?l:c,function(e,r){return l[r]>c[r]?(o=-1,t.EXIT):l[r]<c[r]?(o=1,t.EXIT):void 0});else{if("asec"===u&&e[s]<i[s])return o=-1,r.EXIT;if("asec"===u&&e[s]>i[s])return o=1,r.EXIT;if("desc"===u&&e[s]>i[s])return o=-1,r.EXIT;if("desc"===u&&e[s]<i[s])return o=1,r.EXIT}return 0===o&&"logical"===u&&l.length<c.length?o=-1:0===o&&"logical"===u&&l.length>c.length?o=1:0===o&&"logicaldesc"===u&&l.length>c.length?o=-1:0===o&&"logicaldesc"===u&&l.length<c.length&&(o=1),0!==o?r.EXIT:void 0}),o};return e&&e.push?e.sort(i):e},function(){var e={},t=0;y=function(r){return t>l&&(e={},t=0),e["_"+r]||function(){var n,i,o,a=String(r),s=[],u="_",l="";for(n=0,i=a.length;i>n;n++)o=a.charCodeAt(n),o>=48&&57>=o||46===o?("n"!==l&&(l="n",s.push(u.toLowerCase()),u=""),u+=a.charAt(n)):("s"!==l&&(l="s",s.push(parseFloat(u)),u=""),u+=a.charAt(n));return s.push("n"===l?parseFloat(u):u.toLowerCase()),s.shift(),e["_"+r]=s,t++,s}()}}(),b=function(){this.context({results:this.getDBI().query(this.context())})},c.extend("filter",function(){var e=t.mergeObj(this.context(),{run:null}),r=[];return h(e.q,function(e){r.push(e)}),e.q=r,h(arguments,function(t){e.q.push(m(t)),e.filterRaw.push(t)}),this.getroot(e)}),c.extend("order",function(e){e=e.split(",");var r,n=[];return h(e,function(e){n.push(e.replace(/^\s*/,"").replace(/\s*$/,""))}),r=t.mergeObj(this.context(),{sort:null}),r.order=n,this.getroot(r)}),c.extend("limit",function(e){var r,n=t.mergeObj(this.context(),{});return n.limit=e,n.run&&n.sort&&(r=[],h(n.results,function(n,i){return i+1>e?t.EXIT:void r.push(n)}),n.results=r),this.getroot(n)}),c.extend("start",function(e){var r,n=t.mergeObj(this.context(),{});return n.start=e,n.run&&n.sort&&!n.limit?(r=[],h(n.results,function(t,n){n+1>e&&r.push(t)}),n.results=r):n=t.mergeObj(this.context(),{run:null,start:e}),this.getroot(n)}),c.extend("update",function(e,n,i){var o,a=!0,s={},u=arguments;return!t.isString(e)||2!==arguments.length&&3!==arguments.length?(s=e,2===u.length&&(a=n)):(s[e]=n,3===arguments.length&&(a=i)),o=this,b.call(this),h(this.context().results,function(e){var n=s;t.isFunction(n)?n=n.apply(t.mergeObj(e,{})):r.isFunction(n)&&(n=n(t.mergeObj(e,{}))),t.isObject(n)&&o.getDBI().update(e.___id,n,a)}),this.context().results.length&&this.context({run:null}),this}),c.extend("remove",function(e){var t=this,r=0;return b.call(this),h(this.context().results,function(e){t.getDBI().remove(e.___id),r++}),this.context().results.length&&(this.context({run:null}),t.getDBI().removeCommit(e)),r}),c.extend("count",function(){return b.call(this),this.context().results.length}),c.extend("callback",function(e,t){if(e){var r=this;setTimeout(function(){b.call(r),e.call(r.getroot(r.context()))},t||0)}return null}),c.extend("get",function(){return b.call(this),this.context().results}),c.extend("stringify",function(){return JSON.stringify(this.get())}),c.extend("first",function(){return b.call(this),this.context().results[0]||!1}),c.extend("last",function(){return b.call(this),this.context().results[this.context().results.length-1]||!1}),c.extend("sum",function(){var e=0,t=this;return b.call(t),h(arguments,function(r){h(t.context().results,function(t){e+=t[r]||0})}),e}),c.extend("min",function(e){var t=null;return b.call(this),h(this.context().results,function(r){(null===t||r[e]<t)&&(t=r[e])}),t}),function(){var e=function(){var e,r,n;return e=function(e,t,r){var n,i,o;switch(2===r.length?(n=e[r[0]],o="===",i=t[r[1]]):(n=e[r[0]],o=r[1],i=t[r[2]]),o){case"===":return n===i;case"!==":return n!==i;case"<":return i>n;case">":return n>i;case"<=":return i>=n;case">=":return n>=i;case"==":return n==i;case"!=":return n!=i;default:throw String(o)+" is not supported"}},r=function(e,r){var n,i,o={};for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);for(n in r)r.hasOwnProperty(n)&&"___id"!==n&&"___s"!==n&&(i=t.isUndefined(o[n])?"":"right_",o[i+String(n)]=r[n]);return o},n=function(n){var i,o,a=arguments,s=a.length,u=[];if("function"!=typeof n.filter){if(!n.TAFFY)throw"TAFFY DB or result not supplied";i=n()}else i=n;return this.context({results:this.getDBI().query(this.context())}),t.each(this.context().results,function(t){i.each(function(n){var i,l=!0;e:for(o=1;s>o&&(i=a[o],l="function"==typeof i?i(t,n):"object"==typeof i&&i.length?e(t,n,i):!1,l);o++);l&&u.push(r(t,n))})}),t(u)()}}();c.extend("join",e)}(),c.extend("max",function(e){var t=null;return b.call(this),h(this.context().results,function(r){(null===t||r[e]>t)&&(t=r[e])}),t}),c.extend("select",function(){var e=[],t=arguments;return b.call(this),1===arguments.length?h(this.context().results,function(r){e.push(r[t[0]])}):h(this.context().results,function(r){var n=[];h(t,function(e){n.push(r[e])}),e.push(n)}),e}),c.extend("distinct",function(){var e=[],r=arguments;return b.call(this),1===arguments.length?h(this.context().results,function(n){var i=n[r[0]],o=!1;h(e,function(e){return i===e?(o=!0,t.EXIT):void 0}),o||e.push(i)}):h(this.context().results,function(n){var i=[],o=!1;h(r,function(e){i.push(n[e])}),h(e,function(e){var n=!0;return h(r,function(r,o){return i[o]!==e[o]?(n=!1,t.EXIT):void 0}),n?(o=!0,t.EXIT):void 0}),o||e.push(i)}),e}),c.extend("supplant",function(e,t){var r=[];return b.call(this),h(this.context().results,function(t){r.push(e.replace(/\{([^\{\}]*)\}/g,function(e,r){var n=t[r];return"string"==typeof n||"number"==typeof n?n:e}))}),t?r:r.join("")}),c.extend("each",function(e){return b.call(this),h(this.context().results,e),this}),c.extend("map",function(e){var t=[];return b.call(this),h(this.context().results,function(r){t.push(e(r))}),t}),r=function(e){var n,i,o,a=[],l={},y=1,b={template:!1,onInsert:!1,onUpdate:!1,onRemove:!1,onDBChange:!1,storageName:!1,forcePropertyCase:null,cacheSize:100,name:""},x=new Date,E=0,_=0,A={};return i=function(e){var t=[],n=!1;return 0===e.length?a:(h(e,function(e){r.isString(e)&&/[t][0-9]*[r][0-9]*/i.test(e)&&a[l[e]]&&(t.push(a[l[e]]),n=!0),r.isObject(e)&&e.___id&&e.___s&&a[l[e.___id]]&&(t.push(a[l[e.___id]]),n=!0),r.isArray(e)&&h(e,function(e){h(i(e),function(e){t.push(e)})})}),n&&t.length>1&&(t=[]),t)},n={dm:function(e){return e&&(x=e,A={},E=0,_=0),b.onDBChange&&setTimeout(function(){b.onDBChange.call(a)},0),b.storageName&&setTimeout(function(){localStorage.setItem("taffy_"+b.storageName,JSON.stringify(a))}),x},insert:function(e,i){var c=[],d=[],m=f(e);return h(m,function(e,o){var f,m;return r.isArray(e)&&0===o?(h(e,function(e){c.push("lower"===b.forcePropertyCase?e.toLowerCase():"upper"===b.forcePropertyCase?e.toUpperCase():e)}),!0):(r.isArray(e)?(f={},h(e,function(e,t){f[c[t]]=e}),e=f):r.isObject(e)&&b.forcePropertyCase&&(m={},p(e,function(t,r){m["lower"===b.forcePropertyCase?r.toLowerCase():"upper"===b.forcePropertyCase?r.toUpperCase():r]=e[r]}),e=m),y++,e.___id="T"+String(u+s).slice(-6)+"R"+String(u+y).slice(-6),e.___s=!0,d.push(e.___id),b.template&&(e=r.mergeObj(b.template,e)),a.push(e),l[e.___id]=a.length-1,b.onInsert&&(i||t.isUndefined(i))&&b.onInsert.call(e),void n.dm(new Date))}),o(d)},sort:function(e){return a=v(a,e.split(",")),l={},h(a,function(e,t){l[e.___id]=t}),n.dm(new Date),!0},update:function(e,i,o){var s,u,c,f,h={};b.forcePropertyCase&&(p(i,function(e,t){h["lower"===b.forcePropertyCase?t.toLowerCase():"upper"===b.forcePropertyCase?t.toUpperCase():t]=e}),i=h),s=a[l[e]],u=r.mergeObj(s,i),c={},f=!1,p(u,function(e,r){(t.isUndefined(s[r])||s[r]!==e)&&(c[r]=e,f=!0)}),f&&(b.onUpdate&&(o||t.isUndefined(o))&&b.onUpdate.call(u,a[l[e]],c),a[l[e]]=u,n.dm(new Date))},remove:function(e){a[l[e]].___s=!1},removeCommit:function(e){var r;for(r=a.length-1;r>-1;r--)a[r].___s||(b.onRemove&&(e||t.isUndefined(e))&&b.onRemove.call(a[r]),l[a[r].___id]=void 0,a.splice(r,1));l={},h(a,function(e,t){l[e.___id]=t}),n.dm(new Date)},query:function(e){var o,s,u,l,c,f;if(b.cacheSize&&(s="",h(e.filterRaw,function(e){return r.isFunction(e)?(s="nocache",t.EXIT):void 0}),""===s&&(s=O(r.mergeObj(e,{q:!1,run:!1,sort:!1})))),!e.results||!e.run||e.run&&n.dm()>e.run){if(u=[],b.cacheSize&&A[s])return A[s].i=E++,A[s].results;0===e.q.length&&0===e.index.length?(h(a,function(e){u.push(e)}),o=u):(l=i(e.index),h(l,function(t){(0===e.q.length||g(t,e.q))&&u.push(t)}),o=u)}else o=e.results;return!(e.order.length>0)||e.run&&e.sort||(o=v(o,e.order)),o.length&&(e.limit&&e.limit<o.length||e.start)&&(c=[],h(o,function(r,n){if(!e.start||e.start&&n+1>=e.start)if(e.limit){if(f=e.start?n+1-e.start:n,f<e.limit)c.push(r);else if(f>e.limit)return t.EXIT}else c.push(r)}),o=c),b.cacheSize&&"nocache"!==s&&(_++,setTimeout(function(){var e,t;_>=2*b.cacheSize&&(_=0,e=E-b.cacheSize,t={},p(function(r,n){r.i>=e&&(t[n]=r)}),A=t)},0),A[s]={i:E++,results:o}),o}},o=function(){var e,r;return e=t.mergeObj(t.mergeObj(c,{insert:void 0}),{getDBI:function(){return n},getroot:function(e){return o.call(e)},context:function(e){return e&&(r=t.mergeObj(r,e.hasOwnProperty("results")?t.mergeObj(e,{run:new Date,sort:new Date}):e)),r},extend:void 0}),r=this&&this.q?this:{limit:!1,start:!1,q:[],filterRaw:[],index:[],order:[],results:!1,run:null,sort:null,settings:b},h(arguments,function(e){d(e)?r.index.push(e):r.q.push(m(e)),r.filterRaw.push(e)}),e},s++,e&&n.insert(e),o.insert=n.insert,o.merge=function(e,t,r){var i={},a=[],s={};return r=r||!1,t=t||"id",h(e,function(e){var s;i[t]=e[t],a.push(e[t]),s=o(i).first(),s?n.update(s.___id,e,r):n.insert(e,r)}),s[t]=a,o(s)},o.TAFFY=!0,o.sort=n.sort,o.settings=function(e){return e&&(b=t.mergeObj(b,e),e.template&&o().update(e.template)),b},o.store=function(e){var t,r=!1;return localStorage&&(e&&(t=localStorage.getItem("taffy_"+e),t&&t.length>0&&(o.insert(t),r=!0),a.length>0&&setTimeout(function(){localStorage.setItem("taffy_"+b.storageName,JSON.stringify(a))})),o.settings({storageName:e})),o},o},t=r,r.each=h,r.eachin=p,r.extend=c.extend,t.EXIT="TAFFYEXIT",t.mergeObj=function(e,t){var r={};return p(e,function(t,n){r[n]=e[n]}),p(t,function(e,n){r[n]=t[n]}),r},t.has=function(e,n){var i,o=!1;if(e.TAFFY)return o=e(n),o.length>0?!0:!1;switch(r.typeOf(e)){case"object":if(r.isObject(n))p(n,function(i,a){return o!==!0||r.isUndefined(e[a])||!e.hasOwnProperty(a)?(o=!1,t.EXIT):void(o=r.has(e[a],n[a]))});else if(r.isArray(n))h(n,function(i,a){return o=r.has(e,n[a]),o?t.EXIT:void 0});else if(r.isString(n))return t.isUndefined(e[n])?!1:!0;return o;case"array":if(r.isObject(n))h(e,function(i,a){return o=r.has(e[a],n),o===!0?t.EXIT:void 0});else if(r.isArray(n))h(n,function(i,a){return h(e,function(i,s){return o=r.has(e[s],n[a]),o===!0?t.EXIT:void 0}),o===!0?t.EXIT:void 0});else if(r.isString(n)||r.isNumber(n))for(o=!1,i=0;i<e.length;i++)if(o=r.has(e[i],n))return!0;return o;case"string":if(r.isString(n)&&n===e)return!0;break;default:if(r.typeOf(e)===r.typeOf(n)&&e===n)return!0}return!1},t.hasAll=function(e,r){var n,i=t;return i.isArray(r)?(n=!0,h(r,function(r){return n=i.has(e,r),n===!1?t.EXIT:void 0}),n):i.has(e,r)},t.typeOf=function(e){var t=typeof e;return"object"===t&&(e?"number"!=typeof e.length||e.propertyIsEnumerable("length")||(t="array"):t="null"),t},t.getObjectKeys=function(e){var t=[];return p(e,function(e,r){t.push(r)}),t.sort(),t},t.isSameArray=function(e,r){return t.isArray(e)&&t.isArray(r)&&e.join(",")===r.join(",")?!0:!1},t.isSameObject=function(e,r){var n=t,i=!0;return n.isObject(e)&&n.isObject(r)&&n.isSameArray(n.getObjectKeys(e),n.getObjectKeys(r))?p(e,function(o,a){return n.isObject(e[a])&&n.isObject(r[a])&&n.isSameObject(e[a],r[a])||n.isArray(e[a])&&n.isArray(r[a])&&n.isSameArray(e[a],r[a])||e[a]===r[a]?void 0:(i=!1,t.EXIT)}):i=!1,i},e=["String","Number","Object","Array","Boolean","Null","Function","Undefined"],n=function(e){return function(r){return t.typeOf(r)===e.toLowerCase()?!0:!1}},i=0;i<e.length;i++)o=e[i],t["is"+o]=n(o)}(),"object"==typeof exports&&(exports.taffy=t),e.TAFFY=t}.apply(e,arguments)})}(this),t("lodash/internals/baseClone",["../objects/assign","../collections/forEach","../objects/forOwn","./getArray","../objects/isArray","../objects/isObject","./releaseArray","./slice"],function(e,t,r,n,i,o,a,s){function u(c,f,d,g,x){if(d){var A=d(c);if("undefined"!=typeof A)return A}var w=o(c);if(!w)return c;var S=E.call(c);if(!b[S])return c;var R=_[S];switch(S){case h:case p:return new R(+c);case m:case v:return new R(c);case y:return A=R(c.source,l.exec(c)),A.lastIndex=c.lastIndex,A}var j=i(c);if(f){var I=!g;g||(g=n()),x||(x=n());for(var C=g.length;C--;)if(g[C]==c)return x[C];A=j?R(c.length):{}}else A=j?s(c):e({},c);return j&&(O.call(c,"index")&&(A.index=c.index),O.call(c,"input")&&(A.input=c.input)),f?(g.push(c),x.push(A),(j?t:r)(c,function(e,t){A[t]=u(e,f,d,g,x)}),I&&(a(g),a(x)),A):A}var l=/\w*$/,c="[object Arguments]",f="[object Array]",h="[object Boolean]",p="[object Date]",d="[object Function]",m="[object Number]",g="[object Object]",y="[object RegExp]",v="[object String]",b={};b[d]=!1,b[c]=b[f]=b[h]=b[p]=b[m]=b[g]=b[y]=b[v]=!0;var x=Object.prototype,E=x.toString,O=x.hasOwnProperty,_={};return _[f]=Array,_[h]=Boolean,_[p]=Date,_[d]=Function,_[g]=Object,_[m]=Number,_[y]=RegExp,_[v]=String,u}),t("lodash/objects/clone",["../internals/baseClone","../internals/baseCreateCallback"],function(e,t){function r(r,n,i,o){return"boolean"!=typeof n&&null!=n&&(o=i,i=n,n=!1),e(r,n,"function"==typeof i&&t(i,o,1))}return r}),t("lodash/internals/shimIsPlainObject",["../objects/forIn","../objects/isFunction"],function(e,t){function r(r){var i,s;return r&&o.call(r)==n&&(i=r.constructor,!t(i)||i instanceof i)?(e(r,function(e,t){s=t}),"undefined"==typeof s||a.call(r,s)):!1}var n="[object Object]",i=Object.prototype,o=i.toString,a=i.hasOwnProperty;return r}),t("lodash/objects/isPlainObject",["../internals/isNative","../internals/shimIsPlainObject"],function(e,t){var r="[object Object]",n=Object.prototype,i=n.toString,o=e(o=Object.getPrototypeOf)&&o,a=o?function(n){if(!n||i.call(n)!=r)return!1;var a=n.valueOf,s=e(a)&&(s=o(a))&&o(s);return s?n==s||o(n)==s:t(n)}:t;return a}),t("lodash/collections/map",["../functions/createCallback","../objects/forOwn"],function(e,t){function r(r,n,i){var o=-1,a=r?r.length:0;if(n=e(n,i,3),"number"==typeof a)for(var s=Array(a);++o<a;)s[o]=n(r[o],o,r);else s=[],t(r,function(e,t,r){s[++o]=n(e,t,r)});return s}return r}),t("lodash/internals/baseMerge",["../collections/forEach","../objects/forOwn","../objects/isArray","../objects/isPlainObject"],function(e,t,r,n){function i(o,a,s,u,l){(r(a)?e:t)(a,function(e,t){var a,c,f=e,h=o[t];if(e&&((c=r(e))||n(e))){for(var p=u.length;p--;)if(a=u[p]==e){h=l[p];break}if(!a){var d;s&&(f=s(h,e),(d="undefined"!=typeof f)&&(h=f)),d||(h=c?r(h)?h:[]:n(h)?h:{}),u.push(e),l.push(h),d||i(h,e,s,u,l)}}else s&&(f=s(h,e),"undefined"==typeof f&&(f=e)),"undefined"!=typeof f&&(h=f);o[t]=h})}return i}),t("lodash/objects/merge",["../internals/baseCreateCallback","../internals/baseMerge","../internals/getArray","./isObject","../internals/releaseArray","../internals/slice"],function(e,t,r,n,i,o){function a(a){var s=arguments,u=2;if(!n(a))return a;if("number"!=typeof s[2]&&(u=s.length),u>3&&"function"==typeof s[u-2])var l=e(s[--u-1],s[u--],2);else u>2&&"function"==typeof s[u-1]&&(l=s[--u]);for(var c=o(arguments,1,u),f=-1,h=r(),p=r();++f<u;)t(a,c[f],l,h,p);return i(h),i(p),a}return a}),t("lodash/objects/isArguments",[],function(){function e(e){return e&&"object"==typeof e&&"number"==typeof e.length&&n.call(e)==t||!1}var t="[object Arguments]",r=Object.prototype,n=r.toString;return e}),t("lodash/internals/baseFlatten",["../objects/isArguments","../objects/isArray"],function(e,t){function r(n,i,o,a){for(var s=(a||0)-1,u=n?n.length:0,l=[];++s<u;){var c=n[s];if(c&&"object"==typeof c&&"number"==typeof c.length&&(t(c)||e(c))){i||(c=r(c,i,o));var f=-1,h=c.length,p=l.length;for(l.length+=h;++f<h;)l[p++]=c[f]}else o||l.push(c)}return l}return r}),t("lodash/objects/functions",["./forIn","./isFunction"],function(e,t){function r(r){var n=[];return e(r,function(e,r){t(e)&&n.push(r)}),n.sort()}return r}),t("lodash/functions/bindAll",["../internals/baseFlatten","../internals/createWrapper","../objects/functions"],function(e,t,r){function n(n){for(var i=arguments.length>1?e(arguments,!0,!1,1):r(n),o=-1,a=i.length;++o<a;){var s=i[o];n[s]=t(n[s],1,null,null,n)}return n}return n}),t("lib/store",["./types","taffy","tv4","lodash/objects/clone","lodash/objects/isArray","lodash/objects/isFunction","lodash/objects/isPlainObject","lodash/collections/map","lodash/objects/merge","lodash/collections/reduce","lodash/objects/assign","lodash/functions/bindAll"],function(e,t,r,n,i,o,a,s,u,l,c,f){var h="",p=function(e){return e.$ref?d(n(e)):e.anyOf?y.anyOf:e.allOf?y.allOf:e.oneOf?y.oneOf:e.enum?g.enum:e.type?g[e.type]:e.format?g.string:e.properties?g.object:e.items?g.array:function(){return{generate:function(){return{}},validate:function(){return!0}}}},d=function(e){var t=e.$ref.split("#"),r=t.pop().replace(/^\//,"").replace(/\/$/,""),n=t.length>0&&""!==t[0]?t.shift():h;return delete e.$ref,function(){return{generate:function(){var t=m(b.rawSchemas[n],r.split("/"));return p(u(e,t))(u(e,t)).generate()}}}},m=function(e,t){return t.length?m(e[t.shift()],t):e},g={array:function(t){var r=t.items,n=s(r,function(e){return p(e)(e)});return i(r)?{generate:function(){return s(n,function(e){return e.generate()})},validate:function(e){return l(n,function(t,r){return r.validate(e)&&t},!0)}}:e.array(u({typeDef:p(t.items)(t.items)},t))},"boolean":function(t){return e.boolean(t)},integer:function(t){return e.integer(t)},number:function(t){return e.number(t)},"null":function(t){return e.null(t)},object:function(e){var t=l(e.properties,function(e,t,r){return e[r]=p(t)(t),e},{});return{generate:function(){return t},validate:function(e){return l(t,function(t,r,n){return t&&r.validate(e[n])},!0)}}},string:function(t){var r;return t.pattern?e.randexp(t):t.format?(r=e.formats[t.format],o(r)?r(t):r):e.string(t)},"enum":function(t){var r=t.enum,n=t.type;return n&&(r=l(r,function(e,t){return typeof t===n&&e.push(t),e},[])),{generate:function(){var t=e.integer({minimum:0,maximum:r.length,exclusiveMaximum:!0});return r[t.generate()]}}}},y={anyOf:function(t){var r,i,o=n(t);return delete o.anyOf,r=s(t.anyOf,function(e){var t=u({},o,e);return p(t)(t)}),i=e.integer({minium:0,maximum:r.length,exclusiveMaximum:!0}),{generate:function(){var e=i.generate();return r[e].generate()}}},allOf:function(e){return{generate:p(u.apply(null,e.allOf))(e).generate}},oneOf:function(t){var r,i,o=n(t);return delete o.oneOf,r=s(t.oneOf,function(e){var t=u({},o,e);return p(t)(t)}),i=e.integer({minium:0,maximum:r.length,exclusiveMaximum:!0}),{generate:function(){var e=i.generate();return r[e].generate()}}}},v=function(e,t,r){var n=function(e){var t=[];return l(e,function n(e,i,s){var u,c;return t.push(s),c=t.join("."),r[c]&&(i=o(r[c])?{generate:r[c]}:r[c]),u=o(i.generate)?i.generate():i,u=a(u)?l(u,n,{}):u,e[s]=u,t.pop(),e},{})};return"object"===t.type||"undefined"==typeof t.type?n(e.generate()):"array"===t.type?s(e.generate(),n):e.generate()},b=function(e,r,n,i){if("undefined"==typeof this.constructor)return new b(e,r,n);if(this._schema=this.constructor.schemas[e],this._rawSchema=this.constructor.rawSchemas[e],this._schemaName=e,this._overrides=n||{},!this._rawSchema)throw new Error('Apitizer: Missing schema named "'+this._schemaName+'"');this.API=f(new i(this)),this.db=t(),this.fillStore(r||0)};return c(b,{rawSchemas:{},schemas:{},addSchema:function(e,t){h=e,this.rawSchemas[e]=t,this.schemas[e]=p(t)(t),r.addSchema(e,t),h=""},getSchema:function(e){return this.rawSchemas[e]},dropSchemas:function(){this.rawSchemas={},this.schemas={},r.dropSchemas()},validateWithSchema:function(e,t){return r.validateMultiple(t,e)},addFormat:function(t,n){e.formats[t]=n,r.addFormat(t,function(e){return n.validate(e)?null:"failed validation by the "+t+" format"})}}),c(b.prototype,{generate:function(e){var t=c({},this._overrides,e);return v(this._schema,this._rawSchema,t)},fillStore:function(e){for(var t=this.db().count();e>t;t++)this.db.insert(this.generate());this.makeRandomizer()},add:function(e){var t=this.generate(e);return this.db.insert(t),this.makeRandomizer(),t},makeRandomizer:function(){var t=this.db().count();this.randomizer=0===t?{generate:function(){return 0}}:e.integer({minimum:0,maximum:this.db().count(),exclusiveMaximum:!0})},one:function(){var e=this;return function(){return e.db().get()[e.randomizer.generate()]}},many:function(t,r){var n,i=this,o=this.db().count();return t=t||0,r=r||o,n=e.integer({minimum:t,maximum:r}),function(){var e=n.generate(),t=[],r=i.db().get(),a=i.randomizer.generate();a+e>=o&&(a=Math.max(a+(o-a-e)-1,0));for(var s=0;e>s;s++)t.push(r[a+s]);return t}},validate:function(e){return r.validateMultiple(e,this._schemaName)}}),b}),t("lib/api",["lodash/objects/assign","lodash/objects/merge","lodash/objects/isArray","lodash/collections/contains","lodash/collections/reduce"],function(e,t,r,n,i){var o=function(e){this.store=e};return e(o.prototype,{findOne:function(e){e=this._prepareParams(e);var t=this._getRecordset(e);if(t.count())return t.first();throw this._formatException({errors:["MissingRecord"],status:404})},findAll:function(e){e=this._prepareParams(e);var t,r={},n=e.limit,i=e.offset;return delete e.limit,delete e.offset,t=this._getRecordset(e),r.count=t.count(),n&&(r.limit=n,t=t.limit(parseInt(n,10))),i&&(r.offset=i,t=t.start(i)),r.data=t.get(),r},create:function(e,r){var n=t(this.store.generate(),r),i=this.store.validate(n);if(!i.valid)throw this._formatException({errors:i.errors,status:406});return this.store.db.insert(n),n},update:function(e,r){e=this._prepareParams(e);var n,i,o=this._getRecordset(e);if(0===o.count())throw this._formatException({errors:["MissingRecord"],status:404});if(n=t(o.first(),r),i=this.store.validate(n),i.valid)return o.update(n),n;throw this._formatException({errors:i.errors,status:406})},destroy:function(e){e=this._prepareParams(e);var t=this._getRecordset(e);if(t.count())return t.remove(),{};throw this._formatException({errors:["MissingRecord"],status:404})},_getRecordset:function(e){var t,r=e.order;return delete e.order,t=this.store.db(e),r&&(t=t.order(this._prepareOrder(r))),t},_prepareOrder:function(e){return r(e)?e.join(", "):e},_prepareParams:function(e){var t=["order","limit","offset"];return i(e||{},function(e,r,i){return e[i]=n(t,i)?r:{"==":r},e},{})},_formatException:function(e){return e}}),o.extend=function(t){return function(r){var n=new o(r);return e(n,t),n}},o}),t("apitizer",["tv4","./lib/types","lodash/collections/forEach","./lib/fixtures","./lib/store","./lib/api"],function(e,t,r,n,i,o){var a=null;
return t.formats=t.formats||{},r(t.formats,function(t,r){e.addFormat(r,function(e){return t.validate(e)?null:"failed validation by the "+r+" format"})}),{addSchema:function(e,t){i.addSchema(e,t)},getSchema:function(e){return i.getSchema(e)},dropSchemas:function(){i.dropSchemas()},validateWithSchema:function(e,t){return i.validateWithSchema(e,t)},generateFromSchema:function(e,t){return new i(e,0,t,this.API).generate()},schemaStore:function(e,t,r,n){return new i(e,t,r,n||this.API)},addFormat:function(e,t){i.addFormat(e,t)},start:function(){a||(a=window.XMLHttpRequest,window.XMLHttpRequest=n.responder)},stop:function(){a&&(window.XMLHttpRequest=a,a=null)},types:t,fixture:n,API:o}}),e("apitizer")});